"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Webprojects_ShikshaNetra_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analyze/route.ts */ \"(rsc)/./app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Webprojects\\\\ShikshaNetra\\\\app\\\\api\\\\analyze\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Webprojects_ShikshaNetra_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNXZWJwcm9qZWN0cyU1Q1NoaWtzaGFOZXRyYSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDV2VicHJvamVjdHMlNUNTaGlrc2hhTmV0cmEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8/ZWIyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxXZWJwcm9qZWN0c1xcXFxTaGlrc2hhTmV0cmFcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFdlYnByb2plY3RzXFxcXFNoaWtzaGFOZXRyYVxcXFxhcHBcXFxcYXBpXFxcXGFuYWx5emVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5emUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze/route.ts":
/*!**********************************!*\
  !*** ./app/api/analyze/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/middleware/auth */ \"(rsc)/./lib/middleware/auth.ts\");\n/* harmony import */ var _lib_models_Analysis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/models/Analysis */ \"(rsc)/./lib/models/Analysis.ts\");\n/* harmony import */ var _lib_services_analysisService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/services/analysisService */ \"(rsc)/./lib/services/analysisService.ts\");\n/* harmony import */ var _lib_utils_videoUpload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/utils/videoUpload */ \"(rsc)/./lib/utils/videoUpload.ts\");\n\n\n\n\n\nconst ML_MICROSERVICE_URL = process.env.ML_MICROSERVICE_URL || \"http://localhost:8000\";\nasync function POST(req) {\n    try {\n        // Verify authentication\n        const user = (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(req);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized - Invalid or missing token\"\n            }, {\n                status: 401\n            });\n        }\n        // Parse form data\n        const formData = await req.formData();\n        const file = formData.get(\"file\");\n        const subject = formData.get(\"subject\");\n        const language = formData.get(\"language\");\n        // Validate inputs\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"File is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!subject || !language) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Subject and language are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Upload video to Supabase Storage using utility function\n        const uploadResult = await (0,_lib_utils_videoUpload__WEBPACK_IMPORTED_MODULE_4__.uploadVideoToStorage)(file, user.id);\n        if (!uploadResult.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: uploadResult.error || \"Failed to upload video to storage\"\n            }, {\n                status: 500\n            });\n        }\n        const videoMetadata = uploadResult.videoMetadata;\n        // Prepare ML payload using utility function with signed URL\n        const mlPayload = (0,_lib_utils_videoUpload__WEBPACK_IMPORTED_MODULE_4__.prepareMLPayload)(videoMetadata.signedUrl, subject, language, file, user.id);\n        console.log(`Sending signed video URL to ML service, topic: ${subject}`);\n        // Send request to ML microservice with video URL\n        const mlResponse = await fetch(`${ML_MICROSERVICE_URL}/analyze`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(mlPayload)\n        });\n        console.log(`ML service response status: ${mlResponse.status}`);\n        // Get response as JSON\n        const mlResult = await mlResponse.json();\n        // Handle ML service errors\n        if (!mlResponse.ok || !mlResult.success) {\n            const errorMessage = mlResult.error || `ML service returned status ${mlResponse.status}`;\n            console.error(\"ML service error:\", errorMessage);\n            // Save failed analysis to database\n            try {\n                await (0,_lib_models_Analysis__WEBPACK_IMPORTED_MODULE_2__.createAnalysis)({\n                    userId: user.id,\n                    videoMetadata,\n                    subject,\n                    language,\n                    sessionId: \"failed\",\n                    topic: subject,\n                    transcript: \"\",\n                    clarityScore: 0,\n                    confidenceScore: 0,\n                    audioFeatures: [],\n                    engagementScore: 0,\n                    gestureIndex: 0,\n                    dominantEmotion: \"unknown\",\n                    technicalDepth: 0,\n                    interactionIndex: 0,\n                    topicMatches: {},\n                    topicRelevanceScore: 0,\n                    coachFeedbackError: errorMessage,\n                    mlResponse: mlResult,\n                    status: \"failed\"\n                });\n            } catch (dbError) {\n                console.error(\"Failed to save error to database:\", dbError);\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: errorMessage,\n                details: mlResult.error\n            }, {\n                status: mlResponse.status\n            });\n        }\n        console.log(\"ML analysis successful, transforming response...\");\n        // Transform and flatten ML response\n        const analysisData = (0,_lib_services_analysisService__WEBPACK_IMPORTED_MODULE_3__.transformMLResponse)(mlResult, user.id, videoMetadata, subject, language, mlResult.data?.session_id // Use session_id as video identifier\n        );\n        // Save analysis to database with video URL\n        const savedAnalysis = await (0,_lib_models_Analysis__WEBPACK_IMPORTED_MODULE_2__.createAnalysis)({\n            ...analysisData,\n            videoUrl: videoMetadata.videoUrl,\n            status: \"completed\"\n        });\n        console.log(`Analysis saved with ID: ${savedAnalysis.id}`);\n        // Return the analysis result\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Analysis completed successfully\",\n            analysisId: savedAnalysis.id,\n            data: mlResult.data,\n            metadata: {\n                userId: user.id,\n                fileName: file.name,\n                uploadedAt: savedAnalysis.createdAt\n            }\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Analyze error:\", error);\n        // Check if error is due to ML service not being available\n        if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"ML microservice is not available. Make sure it's running on port 8000.\",\n                details: \"Connection failed\"\n            }, {\n                status: 503\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEQ7UUFDMUQsSUFBSUEsaUJBQWlCc0QsYUFBYXRELE1BQU0rQyxPQUFPLENBQUNRLFFBQVEsQ0FBQyxVQUFVO1lBQ2pFLE9BQU9wRSxxREFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtnQkFDRVUsU0FBUztnQkFDVFQsT0FBTztnQkFDUHlDLFNBQVM7WUFDWCxHQUNBO2dCQUFFeEMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsT0FBT2QscURBQVlBLENBQUNZLElBQUksQ0FDdEI7WUFDRVUsU0FBUztZQUNUVCxPQUFPO1lBQ1B5QyxTQUFTekMsaUJBQWlCd0QsUUFBUXhELE1BQU0rQyxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFOUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGlrc2hhbmV0cmEtcHJvdG90eXBlLy4vYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzPzQ2YmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBhdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAL2xpYi9taWRkbGV3YXJlL2F1dGhcIjtcclxuaW1wb3J0IHsgY3JlYXRlQW5hbHlzaXMgfSBmcm9tIFwiQC9saWIvbW9kZWxzL0FuYWx5c2lzXCI7XHJcbmltcG9ydCB7IHRyYW5zZm9ybU1MUmVzcG9uc2UgfSBmcm9tIFwiQC9saWIvc2VydmljZXMvYW5hbHlzaXNTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IHVwbG9hZFZpZGVvVG9TdG9yYWdlLCBwcmVwYXJlTUxQYXlsb2FkIH0gZnJvbSBcIkAvbGliL3V0aWxzL3ZpZGVvVXBsb2FkXCI7XHJcbmltcG9ydCB7IE1MUmVzcG9uc2UgfSBmcm9tIFwiQC9saWIvdHlwZXMvYW5hbHlzaXNcIjtcclxuXHJcbmNvbnN0IE1MX01JQ1JPU0VSVklDRV9VUkwgPSBwcm9jZXNzLmVudi5NTF9NSUNST1NFUlZJQ0VfVVJMIHx8IFwiaHR0cDovL2xvY2FsaG9zdDo4MDAwXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFZlcmlmeSBhdXRoZW50aWNhdGlvblxyXG4gICAgY29uc3QgdXNlciA9IGF1dGhNaWRkbGV3YXJlKHJlcSk7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IFwiVW5hdXRob3JpemVkIC0gSW52YWxpZCBvciBtaXNzaW5nIHRva2VuXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQYXJzZSBmb3JtIGRhdGFcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxLmZvcm1EYXRhKCk7XHJcbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KFwiZmlsZVwiKSBhcyBGaWxlO1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IGZvcm1EYXRhLmdldChcInN1YmplY3RcIikgYXMgc3RyaW5nO1xyXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSBmb3JtRGF0YS5nZXQoXCJsYW5ndWFnZVwiKSBhcyBzdHJpbmc7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRzXHJcbiAgICBpZiAoIWZpbGUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IFwiRmlsZSBpcyByZXF1aXJlZFwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFzdWJqZWN0IHx8ICFsYW5ndWFnZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogXCJTdWJqZWN0IGFuZCBsYW5ndWFnZSBhcmUgcmVxdWlyZWRcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwbG9hZCB2aWRlbyB0byBTdXBhYmFzZSBTdG9yYWdlIHVzaW5nIHV0aWxpdHkgZnVuY3Rpb25cclxuICAgIGNvbnN0IHVwbG9hZFJlc3VsdCA9IGF3YWl0IHVwbG9hZFZpZGVvVG9TdG9yYWdlKGZpbGUsIHVzZXIuaWQpO1xyXG5cclxuICAgIGlmICghdXBsb2FkUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiB1cGxvYWRSZXN1bHQuZXJyb3IgfHwgXCJGYWlsZWQgdG8gdXBsb2FkIHZpZGVvIHRvIHN0b3JhZ2VcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmlkZW9NZXRhZGF0YSA9IHVwbG9hZFJlc3VsdC52aWRlb01ldGFkYXRhITtcclxuXHJcbiAgICAvLyBQcmVwYXJlIE1MIHBheWxvYWQgdXNpbmcgdXRpbGl0eSBmdW5jdGlvbiB3aXRoIHNpZ25lZCBVUkxcclxuICAgIGNvbnN0IG1sUGF5bG9hZCA9IHByZXBhcmVNTFBheWxvYWQoXHJcbiAgICAgIHZpZGVvTWV0YWRhdGEuc2lnbmVkVXJsLFxyXG4gICAgICBzdWJqZWN0LFxyXG4gICAgICBsYW5ndWFnZSxcclxuICAgICAgZmlsZSxcclxuICAgICAgdXNlci5pZFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgU2VuZGluZyBzaWduZWQgdmlkZW8gVVJMIHRvIE1MIHNlcnZpY2UsIHRvcGljOiAke3N1YmplY3R9YCk7XHJcblxyXG4gICAgLy8gU2VuZCByZXF1ZXN0IHRvIE1MIG1pY3Jvc2VydmljZSB3aXRoIHZpZGVvIFVSTFxyXG4gICAgY29uc3QgbWxSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke01MX01JQ1JPU0VSVklDRV9VUkx9L2FuYWx5emVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobWxQYXlsb2FkKSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGBNTCBzZXJ2aWNlIHJlc3BvbnNlIHN0YXR1czogJHttbFJlc3BvbnNlLnN0YXR1c31gKTtcclxuXHJcbiAgICAvLyBHZXQgcmVzcG9uc2UgYXMgSlNPTlxyXG4gICAgY29uc3QgbWxSZXN1bHQ6IE1MUmVzcG9uc2UgPSBhd2FpdCBtbFJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgTUwgc2VydmljZSBlcnJvcnNcclxuICAgIGlmICghbWxSZXNwb25zZS5vayB8fCAhbWxSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBtbFJlc3VsdC5lcnJvciB8fCBgTUwgc2VydmljZSByZXR1cm5lZCBzdGF0dXMgJHttbFJlc3BvbnNlLnN0YXR1c31gO1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTUwgc2VydmljZSBlcnJvcjpcIiwgZXJyb3JNZXNzYWdlKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNhdmUgZmFpbGVkIGFuYWx5c2lzIHRvIGRhdGFiYXNlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgY3JlYXRlQW5hbHlzaXMoe1xyXG4gICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgdmlkZW9NZXRhZGF0YSxcclxuICAgICAgICAgIHN1YmplY3QsXHJcbiAgICAgICAgICBsYW5ndWFnZSxcclxuICAgICAgICAgIHNlc3Npb25JZDogXCJmYWlsZWRcIixcclxuICAgICAgICAgIHRvcGljOiBzdWJqZWN0LFxyXG4gICAgICAgICAgdHJhbnNjcmlwdDogXCJcIixcclxuICAgICAgICAgIGNsYXJpdHlTY29yZTogMCxcclxuICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogMCxcclxuICAgICAgICAgIGF1ZGlvRmVhdHVyZXM6IFtdLFxyXG4gICAgICAgICAgZW5nYWdlbWVudFNjb3JlOiAwLFxyXG4gICAgICAgICAgZ2VzdHVyZUluZGV4OiAwLFxyXG4gICAgICAgICAgZG9taW5hbnRFbW90aW9uOiBcInVua25vd25cIixcclxuICAgICAgICAgIHRlY2huaWNhbERlcHRoOiAwLFxyXG4gICAgICAgICAgaW50ZXJhY3Rpb25JbmRleDogMCxcclxuICAgICAgICAgIHRvcGljTWF0Y2hlczoge30sXHJcbiAgICAgICAgICB0b3BpY1JlbGV2YW5jZVNjb3JlOiAwLFxyXG4gICAgICAgICAgY29hY2hGZWVkYmFja0Vycm9yOiBlcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgICBtbFJlc3BvbnNlOiBtbFJlc3VsdCxcclxuICAgICAgICAgIHN0YXR1czogXCJmYWlsZWRcIixcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc2F2ZSBlcnJvciB0byBkYXRhYmFzZTpcIiwgZGJFcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgICBkZXRhaWxzOiBtbFJlc3VsdC5lcnJvcixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiBtbFJlc3BvbnNlLnN0YXR1cyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJNTCBhbmFseXNpcyBzdWNjZXNzZnVsLCB0cmFuc2Zvcm1pbmcgcmVzcG9uc2UuLi5cIik7XHJcblxyXG4gICAgLy8gVHJhbnNmb3JtIGFuZCBmbGF0dGVuIE1MIHJlc3BvbnNlXHJcbiAgICBjb25zdCBhbmFseXNpc0RhdGEgPSB0cmFuc2Zvcm1NTFJlc3BvbnNlKFxyXG4gICAgICBtbFJlc3VsdCxcclxuICAgICAgdXNlci5pZCxcclxuICAgICAgdmlkZW9NZXRhZGF0YSxcclxuICAgICAgc3ViamVjdCxcclxuICAgICAgbGFuZ3VhZ2UsXHJcbiAgICAgIG1sUmVzdWx0LmRhdGE/LnNlc3Npb25faWQgLy8gVXNlIHNlc3Npb25faWQgYXMgdmlkZW8gaWRlbnRpZmllclxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTYXZlIGFuYWx5c2lzIHRvIGRhdGFiYXNlIHdpdGggdmlkZW8gVVJMXHJcbiAgICBjb25zdCBzYXZlZEFuYWx5c2lzID0gYXdhaXQgY3JlYXRlQW5hbHlzaXMoe1xyXG4gICAgICAuLi5hbmFseXNpc0RhdGEsXHJcbiAgICAgIHZpZGVvVXJsOiB2aWRlb01ldGFkYXRhLnZpZGVvVXJsLFxyXG4gICAgICBzdGF0dXM6IFwiY29tcGxldGVkXCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgQW5hbHlzaXMgc2F2ZWQgd2l0aCBJRDogJHtzYXZlZEFuYWx5c2lzLmlkfWApO1xyXG5cclxuICAgIC8vIFJldHVybiB0aGUgYW5hbHlzaXMgcmVzdWx0XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwiQW5hbHlzaXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseVwiLFxyXG4gICAgICAgIGFuYWx5c2lzSWQ6IHNhdmVkQW5hbHlzaXMuaWQsXHJcbiAgICAgICAgZGF0YTogbWxSZXN1bHQuZGF0YSxcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICAgIHVwbG9hZGVkQXQ6IHNhdmVkQW5hbHlzaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkFuYWx5emUgZXJyb3I6XCIsIGVycm9yKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBlcnJvciBpcyBkdWUgdG8gTUwgc2VydmljZSBub3QgYmVpbmcgYXZhaWxhYmxlXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImZldGNoXCIpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogXCJNTCBtaWNyb3NlcnZpY2UgaXMgbm90IGF2YWlsYWJsZS4gTWFrZSBzdXJlIGl0J3MgcnVubmluZyBvbiBwb3J0IDgwMDAuXCIsXHJcbiAgICAgICAgICBkZXRhaWxzOiBcIkNvbm5lY3Rpb24gZmFpbGVkXCIgXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgXHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYXV0aE1pZGRsZXdhcmUiLCJjcmVhdGVBbmFseXNpcyIsInRyYW5zZm9ybU1MUmVzcG9uc2UiLCJ1cGxvYWRWaWRlb1RvU3RvcmFnZSIsInByZXBhcmVNTFBheWxvYWQiLCJNTF9NSUNST1NFUlZJQ0VfVVJMIiwicHJvY2VzcyIsImVudiIsIlBPU1QiLCJyZXEiLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiZm9ybURhdGEiLCJmaWxlIiwiZ2V0Iiwic3ViamVjdCIsImxhbmd1YWdlIiwidXBsb2FkUmVzdWx0IiwiaWQiLCJzdWNjZXNzIiwidmlkZW9NZXRhZGF0YSIsIm1sUGF5bG9hZCIsInNpZ25lZFVybCIsImNvbnNvbGUiLCJsb2ciLCJtbFJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtbFJlc3VsdCIsIm9rIiwiZXJyb3JNZXNzYWdlIiwidXNlcklkIiwic2Vzc2lvbklkIiwidG9waWMiLCJ0cmFuc2NyaXB0IiwiY2xhcml0eVNjb3JlIiwiY29uZmlkZW5jZVNjb3JlIiwiYXVkaW9GZWF0dXJlcyIsImVuZ2FnZW1lbnRTY29yZSIsImdlc3R1cmVJbmRleCIsImRvbWluYW50RW1vdGlvbiIsInRlY2huaWNhbERlcHRoIiwiaW50ZXJhY3Rpb25JbmRleCIsInRvcGljTWF0Y2hlcyIsInRvcGljUmVsZXZhbmNlU2NvcmUiLCJjb2FjaEZlZWRiYWNrRXJyb3IiLCJkYkVycm9yIiwiZGV0YWlscyIsImFuYWx5c2lzRGF0YSIsImRhdGEiLCJzZXNzaW9uX2lkIiwic2F2ZWRBbmFseXNpcyIsInZpZGVvVXJsIiwibWVzc2FnZSIsImFuYWx5c2lzSWQiLCJtZXRhZGF0YSIsImZpbGVOYW1lIiwibmFtZSIsInVwbG9hZGVkQXQiLCJjcmVhdGVkQXQiLCJUeXBlRXJyb3IiLCJpbmNsdWRlcyIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/jwt.ts":
/*!***************************!*\
  !*** ./lib/config/jwt.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACCESS_TOKEN_EXPIRY: () => (/* binding */ ACCESS_TOKEN_EXPIRY),\n/* harmony export */   JWT_REFRESH_SECRET: () => (/* binding */ JWT_REFRESH_SECRET),\n/* harmony export */   JWT_SECRET: () => (/* binding */ JWT_SECRET),\n/* harmony export */   REFRESH_TOKEN_EXPIRY: () => (/* binding */ REFRESH_TOKEN_EXPIRY)\n/* harmony export */ });\nconst JWT_SECRET = process.env.JWT_SECRET || \"change-me-in-production\";\nconst JWT_REFRESH_SECRET = process.env.JWT_REFRESH_SECRET || \"change-me-in-production\";\nconst ACCESS_TOKEN_EXPIRY = \"15m\";\nconst REFRESH_TOKEN_EXPIRY = \"7d\";\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL2p3dC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFDN0MsTUFBTUcscUJBQXFCRixRQUFRQyxHQUFHLENBQUNDLGtCQUFrQixJQUFJO0FBQzdELE1BQU1DLHNCQUFzQjtBQUM1QixNQUFNQyx1QkFBdUI7QUFPM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGlrc2hhbmV0cmEtcHJvdG90eXBlLy4vbGliL2NvbmZpZy9qd3QudHM/NjZhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcImNoYW5nZS1tZS1pbi1wcm9kdWN0aW9uXCI7XHJcbmNvbnN0IEpXVF9SRUZSRVNIX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9SRUZSRVNIX1NFQ1JFVCB8fCBcImNoYW5nZS1tZS1pbi1wcm9kdWN0aW9uXCI7XHJcbmNvbnN0IEFDQ0VTU19UT0tFTl9FWFBJUlkgPSBcIjE1bVwiO1xyXG5jb25zdCBSRUZSRVNIX1RPS0VOX0VYUElSWSA9IFwiN2RcIjtcclxuXHJcbmV4cG9ydCB7XHJcbiAgSldUX1NFQ1JFVCxcclxuICBKV1RfUkVGUkVTSF9TRUNSRVQsXHJcbiAgQUNDRVNTX1RPS0VOX0VYUElSWSxcclxuICBSRUZSRVNIX1RPS0VOX0VYUElSWSxcclxufTtcclxuIl0sIm5hbWVzIjpbIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1JFRlJFU0hfU0VDUkVUIiwiQUNDRVNTX1RPS0VOX0VYUElSWSIsIlJFRlJFU0hfVE9LRU5fRVhQSVJZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/jwt.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/supabase.ts":
/*!********************************!*\
  !*** ./lib/config/supabase.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VIDEO_BUCKET: () => (/* binding */ VIDEO_BUCKET),\n/* harmony export */   supabaseBrowser: () => (/* binding */ supabaseBrowser),\n/* harmony export */   supabaseServer: () => (/* binding */ supabaseServer)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/esm/wrapper.mjs\");\n\n/**\r\n * Supabase Client Configuration\r\n * \r\n * Two clients are created for different use cases:\r\n * \r\n * 1. supabaseBrowser - Uses anon key\r\n *    - For client-side operations\r\n *    - Respects Row Level Security (RLS) policies\r\n *    - Safe to use in browser environment\r\n * \r\n * 2. supabaseServer - Uses service role key\r\n *    - For server-side admin operations\r\n *    - Bypasses Row Level Security (RLS)\r\n *    - Should ONLY be used in server-side code (API routes, server components)\r\n *    - Has full access to all database operations\r\n */ const supabaseUrl = \"https://oemnkopqoyweevncmpjs.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9lbW5rb3Bxb3l3ZWV2bmNtcGpzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxODIwNjIsImV4cCI6MjA4MDc1ODA2Mn0.gtBwDumPhFXmr6my-6TPBtf5mR7ycrCONgTEf3FtMts\";\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable. Please check your .env.local file.\");\n}\nif (!supabaseAnonKey) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable. Please check your .env.local file.\");\n}\nif (!supabaseServiceRoleKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY environment variable. Please check your .env.local file.\");\n}\n// Browser client - uses anon key for client-side operations with RLS\nconst supabaseBrowser = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Server client - uses service role key for admin operations (bypasses RLS)\nconst supabaseServer = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRoleKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n// Storage bucket name for videos\nconst VIDEO_BUCKET = \"shikshanetra\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUQ7QUFFckQ7Ozs7Ozs7Ozs7Ozs7OztDQWVDLEdBRUQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLHlCQUF5QkwsUUFBUUMsR0FBRyxDQUFDSyx5QkFBeUI7QUFFcEUsSUFBSSxDQUFDUCxhQUFhO0lBQ2hCLE1BQU0sSUFBSVEsTUFBTTtBQUNsQjtBQUVBLElBQUksQ0FBQ0osaUJBQWlCO0lBQ3BCLE1BQU0sSUFBSUksTUFBTTtBQUNsQjtBQUVBLElBQUksQ0FBQ0Ysd0JBQXdCO0lBQzNCLE1BQU0sSUFBSUUsTUFBTTtBQUNsQjtBQUVBLHFFQUFxRTtBQUM5RCxNQUFNQyxrQkFBa0JWLG1FQUFZQSxDQUFDQyxhQUFhSSxpQkFBaUI7QUFFMUUsNEVBQTRFO0FBQ3JFLE1BQU1NLGlCQUFpQlgsbUVBQVlBLENBQUNDLGFBQWFNLHdCQUF3QjtJQUM5RUssTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtBQUNGLEdBQUc7QUFFSCxpQ0FBaUM7QUFDMUIsTUFBTUMsZUFBZSxlQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8uL2xpYi9jb25maWcvc3VwYWJhc2UudHM/MmMzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxuLyoqXHJcbiAqIFN1cGFiYXNlIENsaWVudCBDb25maWd1cmF0aW9uXHJcbiAqIFxyXG4gKiBUd28gY2xpZW50cyBhcmUgY3JlYXRlZCBmb3IgZGlmZmVyZW50IHVzZSBjYXNlczpcclxuICogXHJcbiAqIDEuIHN1cGFiYXNlQnJvd3NlciAtIFVzZXMgYW5vbiBrZXlcclxuICogICAgLSBGb3IgY2xpZW50LXNpZGUgb3BlcmF0aW9uc1xyXG4gKiAgICAtIFJlc3BlY3RzIFJvdyBMZXZlbCBTZWN1cml0eSAoUkxTKSBwb2xpY2llc1xyXG4gKiAgICAtIFNhZmUgdG8gdXNlIGluIGJyb3dzZXIgZW52aXJvbm1lbnRcclxuICogXHJcbiAqIDIuIHN1cGFiYXNlU2VydmVyIC0gVXNlcyBzZXJ2aWNlIHJvbGUga2V5XHJcbiAqICAgIC0gRm9yIHNlcnZlci1zaWRlIGFkbWluIG9wZXJhdGlvbnNcclxuICogICAgLSBCeXBhc3NlcyBSb3cgTGV2ZWwgU2VjdXJpdHkgKFJMUylcclxuICogICAgLSBTaG91bGQgT05MWSBiZSB1c2VkIGluIHNlcnZlci1zaWRlIGNvZGUgKEFQSSByb3V0ZXMsIHNlcnZlciBjb21wb25lbnRzKVxyXG4gKiAgICAtIEhhcyBmdWxsIGFjY2VzcyB0byBhbGwgZGF0YWJhc2Ugb3BlcmF0aW9uc1xyXG4gKi9cclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlUm9sZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk7XHJcblxyXG5pZiAoIXN1cGFiYXNlVXJsKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZS4gUGxlYXNlIGNoZWNrIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpO1xyXG59XHJcblxyXG5pZiAoIXN1cGFiYXNlQW5vbktleSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZS4gUGxlYXNlIGNoZWNrIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpO1xyXG59XHJcblxyXG5pZiAoIXN1cGFiYXNlU2VydmljZVJvbGVLZXkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZS4gUGxlYXNlIGNoZWNrIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpO1xyXG59XHJcblxyXG4vLyBCcm93c2VyIGNsaWVudCAtIHVzZXMgYW5vbiBrZXkgZm9yIGNsaWVudC1zaWRlIG9wZXJhdGlvbnMgd2l0aCBSTFNcclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQnJvd3NlciA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuXHJcbi8vIFNlcnZlciBjbGllbnQgLSB1c2VzIHNlcnZpY2Ugcm9sZSBrZXkgZm9yIGFkbWluIG9wZXJhdGlvbnMgKGJ5cGFzc2VzIFJMUylcclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlU2VydmVyID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2UsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBTdG9yYWdlIGJ1Y2tldCBuYW1lIGZvciB2aWRlb3NcclxuZXhwb3J0IGNvbnN0IFZJREVPX0JVQ0tFVCA9ICdzaGlrc2hhbmV0cmEnO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VSb2xlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VCcm93c2VyIiwic3VwYWJhc2VTZXJ2ZXIiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiVklERU9fQlVDS0VUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/mongodb.ts":
/*!***************************!*\
  !*** ./lib/db/mongodb.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDatabase: () => (/* binding */ closeDatabase),\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nlet cachedClient = null;\nlet cachedDb = null;\nasync function connectToDatabase() {\n    if (cachedClient && cachedDb) {\n        return {\n            client: cachedClient,\n            db: cachedDb\n        };\n    }\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(MONGODB_URI);\n    await client.connect();\n    const db = client.db();\n    cachedClient = client;\n    cachedDb = db;\n    return {\n        client,\n        db\n    };\n}\nasync function getDatabase() {\n    const { db } = await connectToDatabase();\n    return db;\n}\nasync function closeDatabase() {\n    if (cachedClient) {\n        await cachedClient.close();\n        cachedClient = null;\n        cachedDb = null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwQztBQUUxQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVcsSUFBSTtBQUUvQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRUEsSUFBSUMsZUFBbUM7QUFDdkMsSUFBSUMsV0FBc0I7QUFFbkIsZUFBZUM7SUFDcEIsSUFBSUYsZ0JBQWdCQyxVQUFVO1FBQzVCLE9BQU87WUFBRUUsUUFBUUg7WUFBY0ksSUFBSUg7UUFBUztJQUM5QztJQUVBLE1BQU1FLFNBQVMsSUFBSVIsZ0RBQVdBLENBQUNDO0lBRS9CLE1BQU1PLE9BQU9FLE9BQU87SUFDcEIsTUFBTUQsS0FBS0QsT0FBT0MsRUFBRTtJQUVwQkosZUFBZUc7SUFDZkYsV0FBV0c7SUFFWCxPQUFPO1FBQUVEO1FBQVFDO0lBQUc7QUFDdEI7QUFFTyxlQUFlRTtJQUNwQixNQUFNLEVBQUVGLEVBQUUsRUFBRSxHQUFHLE1BQU1GO0lBQ3JCLE9BQU9FO0FBQ1Q7QUFFTyxlQUFlRztJQUNwQixJQUFJUCxjQUFjO1FBQ2hCLE1BQU1BLGFBQWFRLEtBQUs7UUFDeEJSLGVBQWU7UUFDZkMsV0FBVztJQUNiO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGlrc2hhbmV0cmEtcHJvdG90eXBlLy4vbGliL2RiL21vbmdvZGIudHM/NmU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCwgRGIgfSBmcm9tIFwibW9uZ29kYlwiO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSB8fCBcIlwiO1xyXG5cclxuaWYgKCFNT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlXCIpO1xyXG59XHJcblxyXG5sZXQgY2FjaGVkQ2xpZW50OiBNb25nb0NsaWVudCB8IG51bGwgPSBudWxsO1xyXG5sZXQgY2FjaGVkRGI6IERiIHwgbnVsbCA9IG51bGw7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XHJcbiAgaWYgKGNhY2hlZENsaWVudCAmJiBjYWNoZWREYikge1xyXG4gICAgcmV0dXJuIHsgY2xpZW50OiBjYWNoZWRDbGllbnQsIGRiOiBjYWNoZWREYiB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KE1PTkdPREJfVVJJKTtcclxuXHJcbiAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcclxuICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xyXG5cclxuICBjYWNoZWRDbGllbnQgPSBjbGllbnQ7XHJcbiAgY2FjaGVkRGIgPSBkYjtcclxuXHJcbiAgcmV0dXJuIHsgY2xpZW50LCBkYiB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YWJhc2UoKSB7XHJcbiAgY29uc3QgeyBkYiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICByZXR1cm4gZGI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZURhdGFiYXNlKCkge1xyXG4gIGlmIChjYWNoZWRDbGllbnQpIHtcclxuICAgIGF3YWl0IGNhY2hlZENsaWVudC5jbG9zZSgpO1xyXG4gICAgY2FjaGVkQ2xpZW50ID0gbnVsbDtcclxuICAgIGNhY2hlZERiID0gbnVsbDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJjYWNoZWRDbGllbnQiLCJjYWNoZWREYiIsImNvbm5lY3RUb0RhdGFiYXNlIiwiY2xpZW50IiwiZGIiLCJjb25uZWN0IiwiZ2V0RGF0YWJhc2UiLCJjbG9zZURhdGFiYXNlIiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/auth.ts":
/*!********************************!*\
  !*** ./lib/middleware/auth.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMiddleware: () => (/* binding */ authMiddleware),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_utils_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils/jwt */ \"(rsc)/./lib/utils/jwt.ts\");\n\n\nconst authMiddleware = (req)=>{\n    const authHeader = req.headers.get(\"authorization\");\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return null;\n    }\n    const token = authHeader.substring(7);\n    const payload = (0,_lib_utils_jwt__WEBPACK_IMPORTED_MODULE_1__.verifyAccessToken)(token);\n    if (!payload) {\n        return null;\n    }\n    return payload;\n};\nconst withAuth = (handler)=>{\n    return async (req)=>{\n        const user = authMiddleware(req);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized - Invalid or missing token\"\n            }, {\n                status: 401\n            });\n        }\n        const newReq = req;\n        newReq.user = user;\n        return handler(newReq);\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWlkZGxld2FyZS9hdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDSjtBQVU3QyxNQUFNRSxpQkFBaUIsQ0FBQ0M7SUFDN0IsTUFBTUMsYUFBYUQsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFFbkMsSUFBSSxDQUFDRixjQUFjLENBQUNBLFdBQVdHLFVBQVUsQ0FBQyxZQUFZO1FBQ3BELE9BQU87SUFDVDtJQUVBLE1BQU1DLFFBQVFKLFdBQVdLLFNBQVMsQ0FBQztJQUNuQyxNQUFNQyxVQUFVVCxpRUFBaUJBLENBQUNPO0lBRWxDLElBQUksQ0FBQ0UsU0FBUztRQUNaLE9BQU87SUFDVDtJQUVBLE9BQU9BO0FBQ1QsRUFBRTtBQUVLLE1BQU1DLFdBQVcsQ0FBQ0M7SUFDdkIsT0FBTyxPQUFPVDtRQUNaLE1BQU1VLE9BQU9YLGVBQWVDO1FBRTVCLElBQUksQ0FBQ1UsTUFBTTtZQUNULE9BQU9iLHFEQUFZQSxDQUFDYyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQTBDLEdBQ25EO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxTQUFTZDtRQUNmYyxPQUFPSixJQUFJLEdBQUdBO1FBRWQsT0FBT0QsUUFBUUs7SUFDakI7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8uL2xpYi9taWRkbGV3YXJlL2F1dGgudHM/MjgzZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IHZlcmlmeUFjY2Vzc1Rva2VuIH0gZnJvbSBcIkAvbGliL3V0aWxzL2p3dFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBdXRoZW50aWNhdGVkUmVxdWVzdCBleHRlbmRzIE5leHRSZXF1ZXN0IHtcclxuICB1c2VyPzoge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGVtYWlsOiBzdHJpbmc7XHJcbiAgICByb2xlPzogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoTWlkZGxld2FyZSA9IChyZXE6IE5leHRSZXF1ZXN0KSA9PiB7XHJcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIik7XHJcblxyXG4gIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKFwiQmVhcmVyIFwiKSkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gIGNvbnN0IHBheWxvYWQgPSB2ZXJpZnlBY2Nlc3NUb2tlbih0b2tlbik7XHJcblxyXG4gIGlmICghcGF5bG9hZCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGF5bG9hZDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB3aXRoQXV0aCA9IChoYW5kbGVyOiBGdW5jdGlvbikgPT4ge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0UmVxdWVzdCkgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IGF1dGhNaWRkbGV3YXJlKHJlcSk7XHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBcIlVuYXV0aG9yaXplZCAtIEludmFsaWQgb3IgbWlzc2luZyB0b2tlblwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3UmVxID0gcmVxIGFzIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0O1xyXG4gICAgbmV3UmVxLnVzZXIgPSB1c2VyO1xyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKG5ld1JlcSk7XHJcbiAgfTtcclxufTtcclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInZlcmlmeUFjY2Vzc1Rva2VuIiwiYXV0aE1pZGRsZXdhcmUiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJ0b2tlbiIsInN1YnN0cmluZyIsInBheWxvYWQiLCJ3aXRoQXV0aCIsImhhbmRsZXIiLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwibmV3UmVxIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/models/Analysis.ts":
/*!********************************!*\
  !*** ./lib/models/Analysis.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAnalysis: () => (/* binding */ createAnalysis),\n/* harmony export */   deleteAnalysis: () => (/* binding */ deleteAnalysis),\n/* harmony export */   getAnalysesByUserId: () => (/* binding */ getAnalysesByUserId),\n/* harmony export */   getAnalysisById: () => (/* binding */ getAnalysisById),\n/* harmony export */   getAnalysisStats: () => (/* binding */ getAnalysisStats),\n/* harmony export */   searchAnalyses: () => (/* binding */ searchAnalyses),\n/* harmony export */   updateAnalysis: () => (/* binding */ updateAnalysis)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db/mongodb */ \"(rsc)/./lib/db/mongodb.ts\");\n\n\nconst COLLECTION_NAME = \"analyses\";\nasync function createAnalysis(analysisData) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    const analysis = {\n        ...analysisData,\n        createdAt: new Date(),\n        updatedAt: new Date()\n    };\n    const result = await collection.insertOne(analysis);\n    return {\n        id: result.insertedId.toString(),\n        userId: analysis.userId,\n        videoMetadata: analysis.videoMetadata,\n        subject: analysis.subject,\n        language: analysis.language,\n        videoUrl: analysis.videoUrl,\n        sessionId: analysis.sessionId,\n        topic: analysis.topic,\n        transcript: analysis.transcript,\n        clarityScore: analysis.clarityScore,\n        confidenceScore: analysis.confidenceScore,\n        audioFeatures: analysis.audioFeatures,\n        engagementScore: analysis.engagementScore,\n        gestureIndex: analysis.gestureIndex,\n        dominantEmotion: analysis.dominantEmotion,\n        technicalDepth: analysis.technicalDepth,\n        interactionIndex: analysis.interactionIndex,\n        topicMatches: analysis.topicMatches,\n        topicRelevanceScore: analysis.topicRelevanceScore,\n        coachFeedbackError: analysis.coachFeedbackError,\n        coachSuggestions: analysis.coachSuggestions,\n        coachStrengths: analysis.coachStrengths,\n        mlResponse: analysis.mlResponse,\n        status: analysis.status,\n        createdAt: analysis.createdAt,\n        updatedAt: analysis.updatedAt\n    };\n}\nasync function getAnalysisById(id) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    let objectId;\n    try {\n        objectId = new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id);\n    } catch  {\n        return null;\n    }\n    const analysis = await collection.findOne({\n        _id: objectId\n    });\n    if (!analysis) return null;\n    return {\n        id: analysis._id.toString(),\n        userId: analysis.userId,\n        videoMetadata: analysis.videoMetadata,\n        subject: analysis.subject,\n        language: analysis.language,\n        videoUrl: analysis.videoUrl,\n        sessionId: analysis.sessionId,\n        topic: analysis.topic,\n        transcript: analysis.transcript,\n        clarityScore: analysis.clarityScore,\n        confidenceScore: analysis.confidenceScore,\n        audioFeatures: analysis.audioFeatures,\n        engagementScore: analysis.engagementScore,\n        gestureIndex: analysis.gestureIndex,\n        dominantEmotion: analysis.dominantEmotion,\n        technicalDepth: analysis.technicalDepth,\n        interactionIndex: analysis.interactionIndex,\n        topicMatches: analysis.topicMatches,\n        topicRelevanceScore: analysis.topicRelevanceScore,\n        coachFeedbackError: analysis.coachFeedbackError,\n        coachSuggestions: analysis.coachSuggestions,\n        coachStrengths: analysis.coachStrengths,\n        mlResponse: analysis.mlResponse,\n        status: analysis.status,\n        createdAt: analysis.createdAt,\n        updatedAt: analysis.updatedAt\n    };\n}\nasync function getAnalysesByUserId(userId, limit = 10, skip = 0) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    const analyses = await collection.find({\n        userId\n    }).sort({\n        createdAt: -1\n    }).limit(limit).skip(skip).toArray();\n    return analyses.map((analysis)=>({\n            id: analysis._id.toString(),\n            userId: analysis.userId,\n            videoMetadata: analysis.videoMetadata,\n            subject: analysis.subject,\n            language: analysis.language,\n            videoUrl: analysis.videoUrl,\n            sessionId: analysis.sessionId,\n            topic: analysis.topic,\n            transcript: analysis.transcript,\n            clarityScore: analysis.clarityScore,\n            confidenceScore: analysis.confidenceScore,\n            audioFeatures: analysis.audioFeatures,\n            engagementScore: analysis.engagementScore,\n            gestureIndex: analysis.gestureIndex,\n            dominantEmotion: analysis.dominantEmotion,\n            technicalDepth: analysis.technicalDepth,\n            interactionIndex: analysis.interactionIndex,\n            topicMatches: analysis.topicMatches,\n            topicRelevanceScore: analysis.topicRelevanceScore,\n            coachFeedbackError: analysis.coachFeedbackError,\n            coachSuggestions: analysis.coachSuggestions,\n            coachStrengths: analysis.coachStrengths,\n            mlResponse: analysis.mlResponse,\n            status: analysis.status,\n            createdAt: analysis.createdAt,\n            updatedAt: analysis.updatedAt\n        }));\n}\nasync function updateAnalysis(id, updates) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    let objectId;\n    try {\n        objectId = new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id);\n    } catch  {\n        return null;\n    }\n    const result = await collection.findOneAndUpdate({\n        _id: objectId\n    }, {\n        $set: {\n            ...updates,\n            updatedAt: new Date()\n        }\n    }, {\n        returnDocument: \"after\"\n    });\n    if (!result || !result.value) return null;\n    const updated = result.value;\n    return {\n        id: updated._id.toString(),\n        userId: updated.userId,\n        videoMetadata: updated.videoMetadata,\n        subject: updated.subject,\n        language: updated.language,\n        videoUrl: updated.videoUrl,\n        sessionId: updated.sessionId,\n        topic: updated.topic,\n        transcript: updated.transcript,\n        clarityScore: updated.clarityScore,\n        confidenceScore: updated.confidenceScore,\n        audioFeatures: updated.audioFeatures,\n        engagementScore: updated.engagementScore,\n        gestureIndex: updated.gestureIndex,\n        dominantEmotion: updated.dominantEmotion,\n        technicalDepth: updated.technicalDepth,\n        interactionIndex: updated.interactionIndex,\n        topicMatches: updated.topicMatches,\n        topicRelevanceScore: updated.topicRelevanceScore,\n        coachFeedbackError: updated.coachFeedbackError,\n        coachSuggestions: updated.coachSuggestions,\n        coachStrengths: updated.coachStrengths,\n        mlResponse: updated.mlResponse,\n        status: updated.status,\n        createdAt: updated.createdAt,\n        updatedAt: updated.updatedAt\n    };\n}\nasync function deleteAnalysis(id) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    let objectId;\n    try {\n        objectId = new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id);\n    } catch  {\n        return false;\n    }\n    const result = await collection.deleteOne({\n        _id: objectId\n    });\n    return result.deletedCount > 0;\n}\nasync function getAnalysisStats(userId) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    const stats = await collection.aggregate([\n        {\n            $match: {\n                userId\n            }\n        },\n        {\n            $group: {\n                _id: \"$status\",\n                count: {\n                    $sum: 1\n                }\n            }\n        }\n    ]).toArray();\n    return stats.reduce((acc, stat)=>{\n        acc[stat._id] = stat.count;\n        return acc;\n    }, {});\n}\nasync function searchAnalyses(filters, limit = 10, skip = 0) {\n    const db = await (0,_lib_db_mongodb__WEBPACK_IMPORTED_MODULE_1__.getDatabase)();\n    const collection = db.collection(COLLECTION_NAME);\n    const query = {};\n    // Build query based on filters\n    if (filters.userId) query.userId = filters.userId;\n    if (filters.subject) query.subject = filters.subject;\n    if (filters.topic) query.topic = {\n        $regex: filters.topic,\n        $options: \"i\"\n    };\n    if (filters.dominantEmotion) query.dominantEmotion = filters.dominantEmotion;\n    if (filters.status) query.status = filters.status;\n    // Score filters\n    if (filters.minClarityScore !== undefined) {\n        query.clarityScore = {\n            $gte: filters.minClarityScore\n        };\n    }\n    if (filters.minConfidenceScore !== undefined) {\n        query.confidenceScore = {\n            $gte: filters.minConfidenceScore\n        };\n    }\n    if (filters.minEngagementScore !== undefined) {\n        query.engagementScore = {\n            $gte: filters.minEngagementScore\n        };\n    }\n    if (filters.minTechnicalDepth !== undefined) {\n        query.technicalDepth = {\n            $gte: filters.minTechnicalDepth\n        };\n    }\n    // Date filters\n    if (filters.fromDate || filters.toDate) {\n        query.createdAt = {};\n        if (filters.fromDate) query.createdAt.$gte = filters.fromDate;\n        if (filters.toDate) query.createdAt.$lte = filters.toDate;\n    }\n    const analyses = await collection.find(query).sort({\n        createdAt: -1\n    }).limit(limit).skip(skip).toArray();\n    return analyses.map((analysis)=>({\n            id: analysis._id.toString(),\n            userId: analysis.userId,\n            videoMetadata: analysis.videoMetadata,\n            subject: analysis.subject,\n            language: analysis.language,\n            videoUrl: analysis.videoUrl,\n            sessionId: analysis.sessionId,\n            topic: analysis.topic,\n            transcript: analysis.transcript,\n            clarityScore: analysis.clarityScore,\n            confidenceScore: analysis.confidenceScore,\n            audioFeatures: analysis.audioFeatures,\n            engagementScore: analysis.engagementScore,\n            gestureIndex: analysis.gestureIndex,\n            dominantEmotion: analysis.dominantEmotion,\n            technicalDepth: analysis.technicalDepth,\n            interactionIndex: analysis.interactionIndex,\n            topicMatches: analysis.topicMatches,\n            topicRelevanceScore: analysis.topicRelevanceScore,\n            coachFeedbackError: analysis.coachFeedbackError,\n            coachSuggestions: analysis.coachSuggestions,\n            coachStrengths: analysis.coachStrengths,\n            mlResponse: analysis.mlResponse,\n            status: analysis.status,\n            createdAt: analysis.createdAt,\n            updatedAt: analysis.updatedAt\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9kZWxzL0FuYWx5c2lzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBbUM7QUFDWTtBQVMvQyxNQUFNRSxrQkFBa0I7QUFFakIsZUFBZUMsZUFDcEJDLFlBQWlDO0lBRWpDLE1BQU1DLEtBQUssTUFBTUosNERBQVdBO0lBQzVCLE1BQU1LLGFBQWFELEdBQUdDLFVBQVUsQ0FBQ0o7SUFFakMsTUFBTUssV0FBVztRQUNmLEdBQUdILFlBQVk7UUFDZkksV0FBVyxJQUFJQztRQUNmQyxXQUFXLElBQUlEO0lBQ2pCO0lBRUEsTUFBTUUsU0FBUyxNQUFNTCxXQUFXTSxTQUFTLENBQUNMO0lBRTFDLE9BQU87UUFDTE0sSUFBSUYsT0FBT0csVUFBVSxDQUFDQyxRQUFRO1FBQzlCQyxRQUFRVCxTQUFTUyxNQUFNO1FBQ3ZCQyxlQUFlVixTQUFTVSxhQUFhO1FBQ3JDQyxTQUFTWCxTQUFTVyxPQUFPO1FBQ3pCQyxVQUFVWixTQUFTWSxRQUFRO1FBQzNCQyxVQUFVYixTQUFTYSxRQUFRO1FBQzNCQyxXQUFXZCxTQUFTYyxTQUFTO1FBQzdCQyxPQUFPZixTQUFTZSxLQUFLO1FBQ3JCQyxZQUFZaEIsU0FBU2dCLFVBQVU7UUFDL0JDLGNBQWNqQixTQUFTaUIsWUFBWTtRQUNuQ0MsaUJBQWlCbEIsU0FBU2tCLGVBQWU7UUFDekNDLGVBQWVuQixTQUFTbUIsYUFBYTtRQUNyQ0MsaUJBQWlCcEIsU0FBU29CLGVBQWU7UUFDekNDLGNBQWNyQixTQUFTcUIsWUFBWTtRQUNuQ0MsaUJBQWlCdEIsU0FBU3NCLGVBQWU7UUFDekNDLGdCQUFnQnZCLFNBQVN1QixjQUFjO1FBQ3ZDQyxrQkFBa0J4QixTQUFTd0IsZ0JBQWdCO1FBQzNDQyxjQUFjekIsU0FBU3lCLFlBQVk7UUFDbkNDLHFCQUFxQjFCLFNBQVMwQixtQkFBbUI7UUFDakRDLG9CQUFvQjNCLFNBQVMyQixrQkFBa0I7UUFDL0NDLGtCQUFrQjVCLFNBQVM0QixnQkFBZ0I7UUFDM0NDLGdCQUFnQjdCLFNBQVM2QixjQUFjO1FBQ3ZDQyxZQUFZOUIsU0FBUzhCLFVBQVU7UUFDL0JDLFFBQVEvQixTQUFTK0IsTUFBTTtRQUN2QjlCLFdBQVdELFNBQVNDLFNBQVM7UUFDN0JFLFdBQVdILFNBQVNHLFNBQVM7SUFDL0I7QUFDRjtBQUVPLGVBQWU2QixnQkFBZ0IxQixFQUFVO0lBQzlDLE1BQU1SLEtBQUssTUFBTUosNERBQVdBO0lBQzVCLE1BQU1LLGFBQWFELEdBQUdDLFVBQVUsQ0FBQ0o7SUFFakMsSUFBSXNDO0lBQ0osSUFBSTtRQUNGQSxXQUFXLElBQUl4Qyw2Q0FBUUEsQ0FBQ2E7SUFDMUIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0lBRUEsTUFBTU4sV0FBVyxNQUFNRCxXQUFXbUMsT0FBTyxDQUFDO1FBQUVDLEtBQUtGO0lBQVM7SUFFMUQsSUFBSSxDQUFDakMsVUFBVSxPQUFPO0lBRXRCLE9BQU87UUFDTE0sSUFBSU4sU0FBU21DLEdBQUcsQ0FBQzNCLFFBQVE7UUFDekJDLFFBQVFULFNBQVNTLE1BQU07UUFDdkJDLGVBQWVWLFNBQVNVLGFBQWE7UUFDckNDLFNBQVNYLFNBQVNXLE9BQU87UUFDekJDLFVBQVVaLFNBQVNZLFFBQVE7UUFDM0JDLFVBQVViLFNBQVNhLFFBQVE7UUFDM0JDLFdBQVdkLFNBQVNjLFNBQVM7UUFDN0JDLE9BQU9mLFNBQVNlLEtBQUs7UUFDckJDLFlBQVloQixTQUFTZ0IsVUFBVTtRQUMvQkMsY0FBY2pCLFNBQVNpQixZQUFZO1FBQ25DQyxpQkFBaUJsQixTQUFTa0IsZUFBZTtRQUN6Q0MsZUFBZW5CLFNBQVNtQixhQUFhO1FBQ3JDQyxpQkFBaUJwQixTQUFTb0IsZUFBZTtRQUN6Q0MsY0FBY3JCLFNBQVNxQixZQUFZO1FBQ25DQyxpQkFBaUJ0QixTQUFTc0IsZUFBZTtRQUN6Q0MsZ0JBQWdCdkIsU0FBU3VCLGNBQWM7UUFDdkNDLGtCQUFrQnhCLFNBQVN3QixnQkFBZ0I7UUFDM0NDLGNBQWN6QixTQUFTeUIsWUFBWTtRQUNuQ0MscUJBQXFCMUIsU0FBUzBCLG1CQUFtQjtRQUNqREMsb0JBQW9CM0IsU0FBUzJCLGtCQUFrQjtRQUMvQ0Msa0JBQWtCNUIsU0FBUzRCLGdCQUFnQjtRQUMzQ0MsZ0JBQWdCN0IsU0FBUzZCLGNBQWM7UUFDdkNDLFlBQVk5QixTQUFTOEIsVUFBVTtRQUMvQkMsUUFBUS9CLFNBQVMrQixNQUFNO1FBQ3ZCOUIsV0FBV0QsU0FBU0MsU0FBUztRQUM3QkUsV0FBV0gsU0FBU0csU0FBUztJQUMvQjtBQUNGO0FBRU8sZUFBZWlDLG9CQUNwQjNCLE1BQWMsRUFDZDRCLFFBQVEsRUFBRSxFQUNWQyxPQUFPLENBQUM7SUFFUixNQUFNeEMsS0FBSyxNQUFNSiw0REFBV0E7SUFDNUIsTUFBTUssYUFBYUQsR0FBR0MsVUFBVSxDQUFDSjtJQUVqQyxNQUFNNEMsV0FBVyxNQUFNeEMsV0FDcEJ5QyxJQUFJLENBQUM7UUFBRS9CO0lBQU8sR0FDZGdDLElBQUksQ0FBQztRQUFFeEMsV0FBVyxDQUFDO0lBQUUsR0FDckJvQyxLQUFLLENBQUNBLE9BQ05DLElBQUksQ0FBQ0EsTUFDTEksT0FBTztJQUVWLE9BQU9ILFNBQVNJLEdBQUcsQ0FBQyxDQUFDM0MsV0FBYztZQUNqQ00sSUFBSU4sU0FBU21DLEdBQUcsQ0FBQzNCLFFBQVE7WUFDekJDLFFBQVFULFNBQVNTLE1BQU07WUFDdkJDLGVBQWVWLFNBQVNVLGFBQWE7WUFDckNDLFNBQVNYLFNBQVNXLE9BQU87WUFDekJDLFVBQVVaLFNBQVNZLFFBQVE7WUFDM0JDLFVBQVViLFNBQVNhLFFBQVE7WUFDM0JDLFdBQVdkLFNBQVNjLFNBQVM7WUFDN0JDLE9BQU9mLFNBQVNlLEtBQUs7WUFDckJDLFlBQVloQixTQUFTZ0IsVUFBVTtZQUMvQkMsY0FBY2pCLFNBQVNpQixZQUFZO1lBQ25DQyxpQkFBaUJsQixTQUFTa0IsZUFBZTtZQUN6Q0MsZUFBZW5CLFNBQVNtQixhQUFhO1lBQ3JDQyxpQkFBaUJwQixTQUFTb0IsZUFBZTtZQUN6Q0MsY0FBY3JCLFNBQVNxQixZQUFZO1lBQ25DQyxpQkFBaUJ0QixTQUFTc0IsZUFBZTtZQUN6Q0MsZ0JBQWdCdkIsU0FBU3VCLGNBQWM7WUFDdkNDLGtCQUFrQnhCLFNBQVN3QixnQkFBZ0I7WUFDM0NDLGNBQWN6QixTQUFTeUIsWUFBWTtZQUNuQ0MscUJBQXFCMUIsU0FBUzBCLG1CQUFtQjtZQUNqREMsb0JBQW9CM0IsU0FBUzJCLGtCQUFrQjtZQUMvQ0Msa0JBQWtCNUIsU0FBUzRCLGdCQUFnQjtZQUMzQ0MsZ0JBQWdCN0IsU0FBUzZCLGNBQWM7WUFDdkNDLFlBQVk5QixTQUFTOEIsVUFBVTtZQUMvQkMsUUFBUS9CLFNBQVMrQixNQUFNO1lBQ3ZCOUIsV0FBV0QsU0FBU0MsU0FBUztZQUM3QkUsV0FBV0gsU0FBU0csU0FBUztRQUMvQjtBQUNGO0FBRU8sZUFBZXlDLGVBQ3BCdEMsRUFBVSxFQUNWdUMsT0FBNEI7SUFFNUIsTUFBTS9DLEtBQUssTUFBTUosNERBQVdBO0lBQzVCLE1BQU1LLGFBQWFELEdBQUdDLFVBQVUsQ0FBQ0o7SUFFakMsSUFBSXNDO0lBQ0osSUFBSTtRQUNGQSxXQUFXLElBQUl4Qyw2Q0FBUUEsQ0FBQ2E7SUFDMUIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0lBRUEsTUFBTUYsU0FBUyxNQUFNTCxXQUFXK0MsZ0JBQWdCLENBQzlDO1FBQUVYLEtBQUtGO0lBQVMsR0FDaEI7UUFBRWMsTUFBTTtZQUFFLEdBQUdGLE9BQU87WUFBRTFDLFdBQVcsSUFBSUQ7UUFBTztJQUFFLEdBQzlDO1FBQUU4QyxnQkFBZ0I7SUFBUTtJQUc1QixJQUFJLENBQUM1QyxVQUFVLENBQUNBLE9BQU82QyxLQUFLLEVBQUUsT0FBTztJQUVyQyxNQUFNQyxVQUFVOUMsT0FBTzZDLEtBQUs7SUFDNUIsT0FBTztRQUNMM0MsSUFBSTRDLFFBQVFmLEdBQUcsQ0FBQzNCLFFBQVE7UUFDeEJDLFFBQVF5QyxRQUFRekMsTUFBTTtRQUN0QkMsZUFBZXdDLFFBQVF4QyxhQUFhO1FBQ3BDQyxTQUFTdUMsUUFBUXZDLE9BQU87UUFDeEJDLFVBQVVzQyxRQUFRdEMsUUFBUTtRQUMxQkMsVUFBVXFDLFFBQVFyQyxRQUFRO1FBQzFCQyxXQUFXb0MsUUFBUXBDLFNBQVM7UUFDNUJDLE9BQU9tQyxRQUFRbkMsS0FBSztRQUNwQkMsWUFBWWtDLFFBQVFsQyxVQUFVO1FBQzlCQyxjQUFjaUMsUUFBUWpDLFlBQVk7UUFDbENDLGlCQUFpQmdDLFFBQVFoQyxlQUFlO1FBQ3hDQyxlQUFlK0IsUUFBUS9CLGFBQWE7UUFDcENDLGlCQUFpQjhCLFFBQVE5QixlQUFlO1FBQ3hDQyxjQUFjNkIsUUFBUTdCLFlBQVk7UUFDbENDLGlCQUFpQjRCLFFBQVE1QixlQUFlO1FBQ3hDQyxnQkFBZ0IyQixRQUFRM0IsY0FBYztRQUN0Q0Msa0JBQWtCMEIsUUFBUTFCLGdCQUFnQjtRQUMxQ0MsY0FBY3lCLFFBQVF6QixZQUFZO1FBQ2xDQyxxQkFBcUJ3QixRQUFReEIsbUJBQW1CO1FBQ2hEQyxvQkFBb0J1QixRQUFRdkIsa0JBQWtCO1FBQzlDQyxrQkFBa0JzQixRQUFRdEIsZ0JBQWdCO1FBQzFDQyxnQkFBZ0JxQixRQUFRckIsY0FBYztRQUN0Q0MsWUFBWW9CLFFBQVFwQixVQUFVO1FBQzlCQyxRQUFRbUIsUUFBUW5CLE1BQU07UUFDdEI5QixXQUFXaUQsUUFBUWpELFNBQVM7UUFDNUJFLFdBQVcrQyxRQUFRL0MsU0FBUztJQUM5QjtBQUNGO0FBRU8sZUFBZWdELGVBQWU3QyxFQUFVO0lBQzdDLE1BQU1SLEtBQUssTUFBTUosNERBQVdBO0lBQzVCLE1BQU1LLGFBQWFELEdBQUdDLFVBQVUsQ0FBQ0o7SUFFakMsSUFBSXNDO0lBQ0osSUFBSTtRQUNGQSxXQUFXLElBQUl4Qyw2Q0FBUUEsQ0FBQ2E7SUFDMUIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0lBRUEsTUFBTUYsU0FBUyxNQUFNTCxXQUFXcUQsU0FBUyxDQUFDO1FBQUVqQixLQUFLRjtJQUFTO0lBRTFELE9BQU83QixPQUFPaUQsWUFBWSxHQUFHO0FBQy9CO0FBRU8sZUFBZUMsaUJBQWlCN0MsTUFBYztJQUNuRCxNQUFNWCxLQUFLLE1BQU1KLDREQUFXQTtJQUM1QixNQUFNSyxhQUFhRCxHQUFHQyxVQUFVLENBQUNKO0lBRWpDLE1BQU00RCxRQUFRLE1BQU14RCxXQUNqQnlELFNBQVMsQ0FBQztRQUNUO1lBQUVDLFFBQVE7Z0JBQUVoRDtZQUFPO1FBQUU7UUFDckI7WUFDRWlELFFBQVE7Z0JBQ052QixLQUFLO2dCQUNMd0IsT0FBTztvQkFBRUMsTUFBTTtnQkFBRTtZQUNuQjtRQUNGO0tBQ0QsRUFDQWxCLE9BQU87SUFFVixPQUFPYSxNQUFNTSxNQUFNLENBQUMsQ0FBQ0MsS0FBS0M7UUFDeEJELEdBQUcsQ0FBQ0MsS0FBSzVCLEdBQUcsQ0FBVyxHQUFHNEIsS0FBS0osS0FBSztRQUNwQyxPQUFPRztJQUNULEdBQUcsQ0FBQztBQUNOO0FBRU8sZUFBZUUsZUFDcEJDLE9BQTZELEVBQzdENUIsUUFBUSxFQUFFLEVBQ1ZDLE9BQU8sQ0FBQztJQUVSLE1BQU14QyxLQUFLLE1BQU1KLDREQUFXQTtJQUM1QixNQUFNSyxhQUFhRCxHQUFHQyxVQUFVLENBQUNKO0lBRWpDLE1BQU11RSxRQUFhLENBQUM7SUFFcEIsK0JBQStCO0lBQy9CLElBQUlELFFBQVF4RCxNQUFNLEVBQUV5RCxNQUFNekQsTUFBTSxHQUFHd0QsUUFBUXhELE1BQU07SUFDakQsSUFBSXdELFFBQVF0RCxPQUFPLEVBQUV1RCxNQUFNdkQsT0FBTyxHQUFHc0QsUUFBUXRELE9BQU87SUFDcEQsSUFBSXNELFFBQVFsRCxLQUFLLEVBQUVtRCxNQUFNbkQsS0FBSyxHQUFHO1FBQUVvRCxRQUFRRixRQUFRbEQsS0FBSztRQUFFcUQsVUFBVTtJQUFJO0lBQ3hFLElBQUlILFFBQVEzQyxlQUFlLEVBQUU0QyxNQUFNNUMsZUFBZSxHQUFHMkMsUUFBUTNDLGVBQWU7SUFDNUUsSUFBSTJDLFFBQVFsQyxNQUFNLEVBQUVtQyxNQUFNbkMsTUFBTSxHQUFHa0MsUUFBUWxDLE1BQU07SUFFakQsZ0JBQWdCO0lBQ2hCLElBQUlrQyxRQUFRSSxlQUFlLEtBQUtDLFdBQVc7UUFDekNKLE1BQU1qRCxZQUFZLEdBQUc7WUFBRXNELE1BQU1OLFFBQVFJLGVBQWU7UUFBQztJQUN2RDtJQUNBLElBQUlKLFFBQVFPLGtCQUFrQixLQUFLRixXQUFXO1FBQzVDSixNQUFNaEQsZUFBZSxHQUFHO1lBQUVxRCxNQUFNTixRQUFRTyxrQkFBa0I7UUFBQztJQUM3RDtJQUNBLElBQUlQLFFBQVFRLGtCQUFrQixLQUFLSCxXQUFXO1FBQzVDSixNQUFNOUMsZUFBZSxHQUFHO1lBQUVtRCxNQUFNTixRQUFRUSxrQkFBa0I7UUFBQztJQUM3RDtJQUNBLElBQUlSLFFBQVFTLGlCQUFpQixLQUFLSixXQUFXO1FBQzNDSixNQUFNM0MsY0FBYyxHQUFHO1lBQUVnRCxNQUFNTixRQUFRUyxpQkFBaUI7UUFBQztJQUMzRDtJQUVBLGVBQWU7SUFDZixJQUFJVCxRQUFRVSxRQUFRLElBQUlWLFFBQVFXLE1BQU0sRUFBRTtRQUN0Q1YsTUFBTWpFLFNBQVMsR0FBRyxDQUFDO1FBQ25CLElBQUlnRSxRQUFRVSxRQUFRLEVBQUVULE1BQU1qRSxTQUFTLENBQUNzRSxJQUFJLEdBQUdOLFFBQVFVLFFBQVE7UUFDN0QsSUFBSVYsUUFBUVcsTUFBTSxFQUFFVixNQUFNakUsU0FBUyxDQUFDNEUsSUFBSSxHQUFHWixRQUFRVyxNQUFNO0lBQzNEO0lBRUEsTUFBTXJDLFdBQVcsTUFBTXhDLFdBQ3BCeUMsSUFBSSxDQUFDMEIsT0FDTHpCLElBQUksQ0FBQztRQUFFeEMsV0FBVyxDQUFDO0lBQUUsR0FDckJvQyxLQUFLLENBQUNBLE9BQ05DLElBQUksQ0FBQ0EsTUFDTEksT0FBTztJQUVWLE9BQU9ILFNBQVNJLEdBQUcsQ0FBQyxDQUFDM0MsV0FBYztZQUNqQ00sSUFBSU4sU0FBU21DLEdBQUcsQ0FBQzNCLFFBQVE7WUFDekJDLFFBQVFULFNBQVNTLE1BQU07WUFDdkJDLGVBQWVWLFNBQVNVLGFBQWE7WUFDckNDLFNBQVNYLFNBQVNXLE9BQU87WUFDekJDLFVBQVVaLFNBQVNZLFFBQVE7WUFDM0JDLFVBQVViLFNBQVNhLFFBQVE7WUFDM0JDLFdBQVdkLFNBQVNjLFNBQVM7WUFDN0JDLE9BQU9mLFNBQVNlLEtBQUs7WUFDckJDLFlBQVloQixTQUFTZ0IsVUFBVTtZQUMvQkMsY0FBY2pCLFNBQVNpQixZQUFZO1lBQ25DQyxpQkFBaUJsQixTQUFTa0IsZUFBZTtZQUN6Q0MsZUFBZW5CLFNBQVNtQixhQUFhO1lBQ3JDQyxpQkFBaUJwQixTQUFTb0IsZUFBZTtZQUN6Q0MsY0FBY3JCLFNBQVNxQixZQUFZO1lBQ25DQyxpQkFBaUJ0QixTQUFTc0IsZUFBZTtZQUN6Q0MsZ0JBQWdCdkIsU0FBU3VCLGNBQWM7WUFDdkNDLGtCQUFrQnhCLFNBQVN3QixnQkFBZ0I7WUFDM0NDLGNBQWN6QixTQUFTeUIsWUFBWTtZQUNuQ0MscUJBQXFCMUIsU0FBUzBCLG1CQUFtQjtZQUNqREMsb0JBQW9CM0IsU0FBUzJCLGtCQUFrQjtZQUMvQ0Msa0JBQWtCNUIsU0FBUzRCLGdCQUFnQjtZQUMzQ0MsZ0JBQWdCN0IsU0FBUzZCLGNBQWM7WUFDdkNDLFlBQVk5QixTQUFTOEIsVUFBVTtZQUMvQkMsUUFBUS9CLFNBQVMrQixNQUFNO1lBQ3ZCOUIsV0FBV0QsU0FBU0MsU0FBUztZQUM3QkUsV0FBV0gsU0FBU0csU0FBUztRQUMvQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8uL2xpYi9tb2RlbHMvQW5hbHlzaXMudHM/NjIyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gXCJtb25nb2RiXCI7XHJcbmltcG9ydCB7IGdldERhdGFiYXNlIH0gZnJvbSBcIkAvbGliL2RiL21vbmdvZGJcIjtcclxuaW1wb3J0IHtcclxuICBBbmFseXNpcyxcclxuICBBbmFseXNpc1Jlc3BvbnNlLFxyXG4gIENyZWF0ZUFuYWx5c2lzSW5wdXQsXHJcbiAgVXBkYXRlQW5hbHlzaXNJbnB1dCxcclxuICBBbmFseXNpc1N0YXRzLFxyXG59IGZyb20gXCJAL2xpYi90eXBlcy9hbmFseXNpc1wiO1xyXG5cclxuY29uc3QgQ09MTEVDVElPTl9OQU1FID0gXCJhbmFseXNlc1wiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFuYWx5c2lzKFxyXG4gIGFuYWx5c2lzRGF0YTogQ3JlYXRlQW5hbHlzaXNJbnB1dFxyXG4pOiBQcm9taXNlPEFuYWx5c2lzUmVzcG9uc2U+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IGdldERhdGFiYXNlKCk7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oQ09MTEVDVElPTl9OQU1FKTtcclxuXHJcbiAgY29uc3QgYW5hbHlzaXMgPSB7XHJcbiAgICAuLi5hbmFseXNpc0RhdGEsXHJcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi5pbnNlcnRPbmUoYW5hbHlzaXMpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IHJlc3VsdC5pbnNlcnRlZElkLnRvU3RyaW5nKCksXHJcbiAgICB1c2VySWQ6IGFuYWx5c2lzLnVzZXJJZCxcclxuICAgIHZpZGVvTWV0YWRhdGE6IGFuYWx5c2lzLnZpZGVvTWV0YWRhdGEsXHJcbiAgICBzdWJqZWN0OiBhbmFseXNpcy5zdWJqZWN0LFxyXG4gICAgbGFuZ3VhZ2U6IGFuYWx5c2lzLmxhbmd1YWdlLFxyXG4gICAgdmlkZW9Vcmw6IGFuYWx5c2lzLnZpZGVvVXJsLFxyXG4gICAgc2Vzc2lvbklkOiBhbmFseXNpcy5zZXNzaW9uSWQsXHJcbiAgICB0b3BpYzogYW5hbHlzaXMudG9waWMsXHJcbiAgICB0cmFuc2NyaXB0OiBhbmFseXNpcy50cmFuc2NyaXB0LFxyXG4gICAgY2xhcml0eVNjb3JlOiBhbmFseXNpcy5jbGFyaXR5U2NvcmUsXHJcbiAgICBjb25maWRlbmNlU2NvcmU6IGFuYWx5c2lzLmNvbmZpZGVuY2VTY29yZSxcclxuICAgIGF1ZGlvRmVhdHVyZXM6IGFuYWx5c2lzLmF1ZGlvRmVhdHVyZXMsXHJcbiAgICBlbmdhZ2VtZW50U2NvcmU6IGFuYWx5c2lzLmVuZ2FnZW1lbnRTY29yZSxcclxuICAgIGdlc3R1cmVJbmRleDogYW5hbHlzaXMuZ2VzdHVyZUluZGV4LFxyXG4gICAgZG9taW5hbnRFbW90aW9uOiBhbmFseXNpcy5kb21pbmFudEVtb3Rpb24sXHJcbiAgICB0ZWNobmljYWxEZXB0aDogYW5hbHlzaXMudGVjaG5pY2FsRGVwdGgsXHJcbiAgICBpbnRlcmFjdGlvbkluZGV4OiBhbmFseXNpcy5pbnRlcmFjdGlvbkluZGV4LFxyXG4gICAgdG9waWNNYXRjaGVzOiBhbmFseXNpcy50b3BpY01hdGNoZXMsXHJcbiAgICB0b3BpY1JlbGV2YW5jZVNjb3JlOiBhbmFseXNpcy50b3BpY1JlbGV2YW5jZVNjb3JlLFxyXG4gICAgY29hY2hGZWVkYmFja0Vycm9yOiBhbmFseXNpcy5jb2FjaEZlZWRiYWNrRXJyb3IsXHJcbiAgICBjb2FjaFN1Z2dlc3Rpb25zOiBhbmFseXNpcy5jb2FjaFN1Z2dlc3Rpb25zLFxyXG4gICAgY29hY2hTdHJlbmd0aHM6IGFuYWx5c2lzLmNvYWNoU3RyZW5ndGhzLFxyXG4gICAgbWxSZXNwb25zZTogYW5hbHlzaXMubWxSZXNwb25zZSxcclxuICAgIHN0YXR1czogYW5hbHlzaXMuc3RhdHVzLFxyXG4gICAgY3JlYXRlZEF0OiBhbmFseXNpcy5jcmVhdGVkQXQsXHJcbiAgICB1cGRhdGVkQXQ6IGFuYWx5c2lzLnVwZGF0ZWRBdCxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QW5hbHlzaXNCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEFuYWx5c2lzUmVzcG9uc2UgfCBudWxsPiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKENPTExFQ1RJT05fTkFNRSk7XHJcblxyXG4gIGxldCBvYmplY3RJZDtcclxuICB0cnkge1xyXG4gICAgb2JqZWN0SWQgPSBuZXcgT2JqZWN0SWQoaWQpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZSh7IF9pZDogb2JqZWN0SWQgfSk7XHJcblxyXG4gIGlmICghYW5hbHlzaXMpIHJldHVybiBudWxsO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IGFuYWx5c2lzLl9pZC50b1N0cmluZygpLFxyXG4gICAgdXNlcklkOiBhbmFseXNpcy51c2VySWQsXHJcbiAgICB2aWRlb01ldGFkYXRhOiBhbmFseXNpcy52aWRlb01ldGFkYXRhLFxyXG4gICAgc3ViamVjdDogYW5hbHlzaXMuc3ViamVjdCxcclxuICAgIGxhbmd1YWdlOiBhbmFseXNpcy5sYW5ndWFnZSxcclxuICAgIHZpZGVvVXJsOiBhbmFseXNpcy52aWRlb1VybCxcclxuICAgIHNlc3Npb25JZDogYW5hbHlzaXMuc2Vzc2lvbklkLFxyXG4gICAgdG9waWM6IGFuYWx5c2lzLnRvcGljLFxyXG4gICAgdHJhbnNjcmlwdDogYW5hbHlzaXMudHJhbnNjcmlwdCxcclxuICAgIGNsYXJpdHlTY29yZTogYW5hbHlzaXMuY2xhcml0eVNjb3JlLFxyXG4gICAgY29uZmlkZW5jZVNjb3JlOiBhbmFseXNpcy5jb25maWRlbmNlU2NvcmUsXHJcbiAgICBhdWRpb0ZlYXR1cmVzOiBhbmFseXNpcy5hdWRpb0ZlYXR1cmVzLFxyXG4gICAgZW5nYWdlbWVudFNjb3JlOiBhbmFseXNpcy5lbmdhZ2VtZW50U2NvcmUsXHJcbiAgICBnZXN0dXJlSW5kZXg6IGFuYWx5c2lzLmdlc3R1cmVJbmRleCxcclxuICAgIGRvbWluYW50RW1vdGlvbjogYW5hbHlzaXMuZG9taW5hbnRFbW90aW9uLFxyXG4gICAgdGVjaG5pY2FsRGVwdGg6IGFuYWx5c2lzLnRlY2huaWNhbERlcHRoLFxyXG4gICAgaW50ZXJhY3Rpb25JbmRleDogYW5hbHlzaXMuaW50ZXJhY3Rpb25JbmRleCxcclxuICAgIHRvcGljTWF0Y2hlczogYW5hbHlzaXMudG9waWNNYXRjaGVzLFxyXG4gICAgdG9waWNSZWxldmFuY2VTY29yZTogYW5hbHlzaXMudG9waWNSZWxldmFuY2VTY29yZSxcclxuICAgIGNvYWNoRmVlZGJhY2tFcnJvcjogYW5hbHlzaXMuY29hY2hGZWVkYmFja0Vycm9yLFxyXG4gICAgY29hY2hTdWdnZXN0aW9uczogYW5hbHlzaXMuY29hY2hTdWdnZXN0aW9ucyxcclxuICAgIGNvYWNoU3RyZW5ndGhzOiBhbmFseXNpcy5jb2FjaFN0cmVuZ3RocyxcclxuICAgIG1sUmVzcG9uc2U6IGFuYWx5c2lzLm1sUmVzcG9uc2UsXHJcbiAgICBzdGF0dXM6IGFuYWx5c2lzLnN0YXR1cyxcclxuICAgIGNyZWF0ZWRBdDogYW5hbHlzaXMuY3JlYXRlZEF0LFxyXG4gICAgdXBkYXRlZEF0OiBhbmFseXNpcy51cGRhdGVkQXQsXHJcbiAgfSBhcyBBbmFseXNpc1Jlc3BvbnNlO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QW5hbHlzZXNCeVVzZXJJZChcclxuICB1c2VySWQ6IHN0cmluZyxcclxuICBsaW1pdCA9IDEwLFxyXG4gIHNraXAgPSAwXHJcbik6IFByb21pc2U8QW5hbHlzaXNSZXNwb25zZVtdPiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKENPTExFQ1RJT05fTkFNRSk7XHJcblxyXG4gIGNvbnN0IGFuYWx5c2VzID0gYXdhaXQgY29sbGVjdGlvblxyXG4gICAgLmZpbmQoeyB1c2VySWQgfSlcclxuICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxyXG4gICAgLmxpbWl0KGxpbWl0KVxyXG4gICAgLnNraXAoc2tpcClcclxuICAgIC50b0FycmF5KCk7XHJcblxyXG4gIHJldHVybiBhbmFseXNlcy5tYXAoKGFuYWx5c2lzKSA9PiAoe1xyXG4gICAgaWQ6IGFuYWx5c2lzLl9pZC50b1N0cmluZygpLFxyXG4gICAgdXNlcklkOiBhbmFseXNpcy51c2VySWQsXHJcbiAgICB2aWRlb01ldGFkYXRhOiBhbmFseXNpcy52aWRlb01ldGFkYXRhLFxyXG4gICAgc3ViamVjdDogYW5hbHlzaXMuc3ViamVjdCxcclxuICAgIGxhbmd1YWdlOiBhbmFseXNpcy5sYW5ndWFnZSxcclxuICAgIHZpZGVvVXJsOiBhbmFseXNpcy52aWRlb1VybCxcclxuICAgIHNlc3Npb25JZDogYW5hbHlzaXMuc2Vzc2lvbklkLFxyXG4gICAgdG9waWM6IGFuYWx5c2lzLnRvcGljLFxyXG4gICAgdHJhbnNjcmlwdDogYW5hbHlzaXMudHJhbnNjcmlwdCxcclxuICAgIGNsYXJpdHlTY29yZTogYW5hbHlzaXMuY2xhcml0eVNjb3JlLFxyXG4gICAgY29uZmlkZW5jZVNjb3JlOiBhbmFseXNpcy5jb25maWRlbmNlU2NvcmUsXHJcbiAgICBhdWRpb0ZlYXR1cmVzOiBhbmFseXNpcy5hdWRpb0ZlYXR1cmVzLFxyXG4gICAgZW5nYWdlbWVudFNjb3JlOiBhbmFseXNpcy5lbmdhZ2VtZW50U2NvcmUsXHJcbiAgICBnZXN0dXJlSW5kZXg6IGFuYWx5c2lzLmdlc3R1cmVJbmRleCxcclxuICAgIGRvbWluYW50RW1vdGlvbjogYW5hbHlzaXMuZG9taW5hbnRFbW90aW9uLFxyXG4gICAgdGVjaG5pY2FsRGVwdGg6IGFuYWx5c2lzLnRlY2huaWNhbERlcHRoLFxyXG4gICAgaW50ZXJhY3Rpb25JbmRleDogYW5hbHlzaXMuaW50ZXJhY3Rpb25JbmRleCxcclxuICAgIHRvcGljTWF0Y2hlczogYW5hbHlzaXMudG9waWNNYXRjaGVzLFxyXG4gICAgdG9waWNSZWxldmFuY2VTY29yZTogYW5hbHlzaXMudG9waWNSZWxldmFuY2VTY29yZSxcclxuICAgIGNvYWNoRmVlZGJhY2tFcnJvcjogYW5hbHlzaXMuY29hY2hGZWVkYmFja0Vycm9yLFxyXG4gICAgY29hY2hTdWdnZXN0aW9uczogYW5hbHlzaXMuY29hY2hTdWdnZXN0aW9ucyxcclxuICAgIGNvYWNoU3RyZW5ndGhzOiBhbmFseXNpcy5jb2FjaFN0cmVuZ3RocyxcclxuICAgIG1sUmVzcG9uc2U6IGFuYWx5c2lzLm1sUmVzcG9uc2UsXHJcbiAgICBzdGF0dXM6IGFuYWx5c2lzLnN0YXR1cyxcclxuICAgIGNyZWF0ZWRBdDogYW5hbHlzaXMuY3JlYXRlZEF0LFxyXG4gICAgdXBkYXRlZEF0OiBhbmFseXNpcy51cGRhdGVkQXQsXHJcbiAgfSkpIGFzIEFuYWx5c2lzUmVzcG9uc2VbXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFuYWx5c2lzKFxyXG4gIGlkOiBzdHJpbmcsXHJcbiAgdXBkYXRlczogVXBkYXRlQW5hbHlzaXNJbnB1dFxyXG4pOiBQcm9taXNlPEFuYWx5c2lzUmVzcG9uc2UgfCBudWxsPiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKENPTExFQ1RJT05fTkFNRSk7XHJcblxyXG4gIGxldCBvYmplY3RJZDtcclxuICB0cnkge1xyXG4gICAgb2JqZWN0SWQgPSBuZXcgT2JqZWN0SWQoaWQpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICB7IF9pZDogb2JqZWN0SWQgfSxcclxuICAgIHsgJHNldDogeyAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfSB9LFxyXG4gICAgeyByZXR1cm5Eb2N1bWVudDogXCJhZnRlclwiIH1cclxuICApO1xyXG5cclxuICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LnZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgdXBkYXRlZCA9IHJlc3VsdC52YWx1ZTtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IHVwZGF0ZWQuX2lkLnRvU3RyaW5nKCksXHJcbiAgICB1c2VySWQ6IHVwZGF0ZWQudXNlcklkLFxyXG4gICAgdmlkZW9NZXRhZGF0YTogdXBkYXRlZC52aWRlb01ldGFkYXRhLFxyXG4gICAgc3ViamVjdDogdXBkYXRlZC5zdWJqZWN0LFxyXG4gICAgbGFuZ3VhZ2U6IHVwZGF0ZWQubGFuZ3VhZ2UsXHJcbiAgICB2aWRlb1VybDogdXBkYXRlZC52aWRlb1VybCxcclxuICAgIHNlc3Npb25JZDogdXBkYXRlZC5zZXNzaW9uSWQsXHJcbiAgICB0b3BpYzogdXBkYXRlZC50b3BpYyxcclxuICAgIHRyYW5zY3JpcHQ6IHVwZGF0ZWQudHJhbnNjcmlwdCxcclxuICAgIGNsYXJpdHlTY29yZTogdXBkYXRlZC5jbGFyaXR5U2NvcmUsXHJcbiAgICBjb25maWRlbmNlU2NvcmU6IHVwZGF0ZWQuY29uZmlkZW5jZVNjb3JlLFxyXG4gICAgYXVkaW9GZWF0dXJlczogdXBkYXRlZC5hdWRpb0ZlYXR1cmVzLFxyXG4gICAgZW5nYWdlbWVudFNjb3JlOiB1cGRhdGVkLmVuZ2FnZW1lbnRTY29yZSxcclxuICAgIGdlc3R1cmVJbmRleDogdXBkYXRlZC5nZXN0dXJlSW5kZXgsXHJcbiAgICBkb21pbmFudEVtb3Rpb246IHVwZGF0ZWQuZG9taW5hbnRFbW90aW9uLFxyXG4gICAgdGVjaG5pY2FsRGVwdGg6IHVwZGF0ZWQudGVjaG5pY2FsRGVwdGgsXHJcbiAgICBpbnRlcmFjdGlvbkluZGV4OiB1cGRhdGVkLmludGVyYWN0aW9uSW5kZXgsXHJcbiAgICB0b3BpY01hdGNoZXM6IHVwZGF0ZWQudG9waWNNYXRjaGVzLFxyXG4gICAgdG9waWNSZWxldmFuY2VTY29yZTogdXBkYXRlZC50b3BpY1JlbGV2YW5jZVNjb3JlLFxyXG4gICAgY29hY2hGZWVkYmFja0Vycm9yOiB1cGRhdGVkLmNvYWNoRmVlZGJhY2tFcnJvcixcclxuICAgIGNvYWNoU3VnZ2VzdGlvbnM6IHVwZGF0ZWQuY29hY2hTdWdnZXN0aW9ucyxcclxuICAgIGNvYWNoU3RyZW5ndGhzOiB1cGRhdGVkLmNvYWNoU3RyZW5ndGhzLFxyXG4gICAgbWxSZXNwb25zZTogdXBkYXRlZC5tbFJlc3BvbnNlLFxyXG4gICAgc3RhdHVzOiB1cGRhdGVkLnN0YXR1cyxcclxuICAgIGNyZWF0ZWRBdDogdXBkYXRlZC5jcmVhdGVkQXQsXHJcbiAgICB1cGRhdGVkQXQ6IHVwZGF0ZWQudXBkYXRlZEF0LFxyXG4gIH0gYXMgQW5hbHlzaXNSZXNwb25zZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFuYWx5c2lzKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IGdldERhdGFiYXNlKCk7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oQ09MTEVDVElPTl9OQU1FKTtcclxuXHJcbiAgbGV0IG9iamVjdElkO1xyXG4gIHRyeSB7XHJcbiAgICBvYmplY3RJZCA9IG5ldyBPYmplY3RJZChpZCk7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IF9pZDogb2JqZWN0SWQgfSk7XHJcblxyXG4gIHJldHVybiByZXN1bHQuZGVsZXRlZENvdW50ID4gMDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFuYWx5c2lzU3RhdHModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFuYWx5c2lzU3RhdHM+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IGdldERhdGFiYXNlKCk7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oQ09MTEVDVElPTl9OQU1FKTtcclxuXHJcbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCBjb2xsZWN0aW9uXHJcbiAgICAuYWdncmVnYXRlKFtcclxuICAgICAgeyAkbWF0Y2g6IHsgdXNlcklkIH0gfSxcclxuICAgICAge1xyXG4gICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgX2lkOiBcIiRzdGF0dXNcIixcclxuICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICAgIC50b0FycmF5KCk7XHJcblxyXG4gIHJldHVybiBzdGF0cy5yZWR1Y2UoKGFjYywgc3RhdCkgPT4ge1xyXG4gICAgYWNjW3N0YXQuX2lkIGFzIHN0cmluZ10gPSBzdGF0LmNvdW50O1xyXG4gICAgcmV0dXJuIGFjYztcclxuICB9LCB7fSBhcyBBbmFseXNpc1N0YXRzKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaEFuYWx5c2VzKFxyXG4gIGZpbHRlcnM6IGltcG9ydChcIkAvbGliL3R5cGVzL2FuYWx5c2lzXCIpLkFuYWx5c2lzU2VhcmNoRmlsdGVycyxcclxuICBsaW1pdCA9IDEwLFxyXG4gIHNraXAgPSAwXHJcbik6IFByb21pc2U8QW5hbHlzaXNSZXNwb25zZVtdPiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpO1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKENPTExFQ1RJT05fTkFNRSk7XHJcblxyXG4gIGNvbnN0IHF1ZXJ5OiBhbnkgPSB7fTtcclxuXHJcbiAgLy8gQnVpbGQgcXVlcnkgYmFzZWQgb24gZmlsdGVyc1xyXG4gIGlmIChmaWx0ZXJzLnVzZXJJZCkgcXVlcnkudXNlcklkID0gZmlsdGVycy51c2VySWQ7XHJcbiAgaWYgKGZpbHRlcnMuc3ViamVjdCkgcXVlcnkuc3ViamVjdCA9IGZpbHRlcnMuc3ViamVjdDtcclxuICBpZiAoZmlsdGVycy50b3BpYykgcXVlcnkudG9waWMgPSB7ICRyZWdleDogZmlsdGVycy50b3BpYywgJG9wdGlvbnM6IFwiaVwiIH07XHJcbiAgaWYgKGZpbHRlcnMuZG9taW5hbnRFbW90aW9uKSBxdWVyeS5kb21pbmFudEVtb3Rpb24gPSBmaWx0ZXJzLmRvbWluYW50RW1vdGlvbjtcclxuICBpZiAoZmlsdGVycy5zdGF0dXMpIHF1ZXJ5LnN0YXR1cyA9IGZpbHRlcnMuc3RhdHVzO1xyXG5cclxuICAvLyBTY29yZSBmaWx0ZXJzXHJcbiAgaWYgKGZpbHRlcnMubWluQ2xhcml0eVNjb3JlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIHF1ZXJ5LmNsYXJpdHlTY29yZSA9IHsgJGd0ZTogZmlsdGVycy5taW5DbGFyaXR5U2NvcmUgfTtcclxuICB9XHJcbiAgaWYgKGZpbHRlcnMubWluQ29uZmlkZW5jZVNjb3JlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIHF1ZXJ5LmNvbmZpZGVuY2VTY29yZSA9IHsgJGd0ZTogZmlsdGVycy5taW5Db25maWRlbmNlU2NvcmUgfTtcclxuICB9XHJcbiAgaWYgKGZpbHRlcnMubWluRW5nYWdlbWVudFNjb3JlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIHF1ZXJ5LmVuZ2FnZW1lbnRTY29yZSA9IHsgJGd0ZTogZmlsdGVycy5taW5FbmdhZ2VtZW50U2NvcmUgfTtcclxuICB9XHJcbiAgaWYgKGZpbHRlcnMubWluVGVjaG5pY2FsRGVwdGggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgcXVlcnkudGVjaG5pY2FsRGVwdGggPSB7ICRndGU6IGZpbHRlcnMubWluVGVjaG5pY2FsRGVwdGggfTtcclxuICB9XHJcblxyXG4gIC8vIERhdGUgZmlsdGVyc1xyXG4gIGlmIChmaWx0ZXJzLmZyb21EYXRlIHx8IGZpbHRlcnMudG9EYXRlKSB7XHJcbiAgICBxdWVyeS5jcmVhdGVkQXQgPSB7fTtcclxuICAgIGlmIChmaWx0ZXJzLmZyb21EYXRlKSBxdWVyeS5jcmVhdGVkQXQuJGd0ZSA9IGZpbHRlcnMuZnJvbURhdGU7XHJcbiAgICBpZiAoZmlsdGVycy50b0RhdGUpIHF1ZXJ5LmNyZWF0ZWRBdC4kbHRlID0gZmlsdGVycy50b0RhdGU7XHJcbiAgfVxyXG5cclxuICBjb25zdCBhbmFseXNlcyA9IGF3YWl0IGNvbGxlY3Rpb25cclxuICAgIC5maW5kKHF1ZXJ5KVxyXG4gICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXHJcbiAgICAubGltaXQobGltaXQpXHJcbiAgICAuc2tpcChza2lwKVxyXG4gICAgLnRvQXJyYXkoKTtcclxuXHJcbiAgcmV0dXJuIGFuYWx5c2VzLm1hcCgoYW5hbHlzaXMpID0+ICh7XHJcbiAgICBpZDogYW5hbHlzaXMuX2lkLnRvU3RyaW5nKCksXHJcbiAgICB1c2VySWQ6IGFuYWx5c2lzLnVzZXJJZCxcclxuICAgIHZpZGVvTWV0YWRhdGE6IGFuYWx5c2lzLnZpZGVvTWV0YWRhdGEsXHJcbiAgICBzdWJqZWN0OiBhbmFseXNpcy5zdWJqZWN0LFxyXG4gICAgbGFuZ3VhZ2U6IGFuYWx5c2lzLmxhbmd1YWdlLFxyXG4gICAgdmlkZW9Vcmw6IGFuYWx5c2lzLnZpZGVvVXJsLFxyXG4gICAgc2Vzc2lvbklkOiBhbmFseXNpcy5zZXNzaW9uSWQsXHJcbiAgICB0b3BpYzogYW5hbHlzaXMudG9waWMsXHJcbiAgICB0cmFuc2NyaXB0OiBhbmFseXNpcy50cmFuc2NyaXB0LFxyXG4gICAgY2xhcml0eVNjb3JlOiBhbmFseXNpcy5jbGFyaXR5U2NvcmUsXHJcbiAgICBjb25maWRlbmNlU2NvcmU6IGFuYWx5c2lzLmNvbmZpZGVuY2VTY29yZSxcclxuICAgIGF1ZGlvRmVhdHVyZXM6IGFuYWx5c2lzLmF1ZGlvRmVhdHVyZXMsXHJcbiAgICBlbmdhZ2VtZW50U2NvcmU6IGFuYWx5c2lzLmVuZ2FnZW1lbnRTY29yZSxcclxuICAgIGdlc3R1cmVJbmRleDogYW5hbHlzaXMuZ2VzdHVyZUluZGV4LFxyXG4gICAgZG9taW5hbnRFbW90aW9uOiBhbmFseXNpcy5kb21pbmFudEVtb3Rpb24sXHJcbiAgICB0ZWNobmljYWxEZXB0aDogYW5hbHlzaXMudGVjaG5pY2FsRGVwdGgsXHJcbiAgICBpbnRlcmFjdGlvbkluZGV4OiBhbmFseXNpcy5pbnRlcmFjdGlvbkluZGV4LFxyXG4gICAgdG9waWNNYXRjaGVzOiBhbmFseXNpcy50b3BpY01hdGNoZXMsXHJcbiAgICB0b3BpY1JlbGV2YW5jZVNjb3JlOiBhbmFseXNpcy50b3BpY1JlbGV2YW5jZVNjb3JlLFxyXG4gICAgY29hY2hGZWVkYmFja0Vycm9yOiBhbmFseXNpcy5jb2FjaEZlZWRiYWNrRXJyb3IsXHJcbiAgICBjb2FjaFN1Z2dlc3Rpb25zOiBhbmFseXNpcy5jb2FjaFN1Z2dlc3Rpb25zLFxyXG4gICAgY29hY2hTdHJlbmd0aHM6IGFuYWx5c2lzLmNvYWNoU3RyZW5ndGhzLFxyXG4gICAgbWxSZXNwb25zZTogYW5hbHlzaXMubWxSZXNwb25zZSxcclxuICAgIHN0YXR1czogYW5hbHlzaXMuc3RhdHVzLFxyXG4gICAgY3JlYXRlZEF0OiBhbmFseXNpcy5jcmVhdGVkQXQsXHJcbiAgICB1cGRhdGVkQXQ6IGFuYWx5c2lzLnVwZGF0ZWRBdCxcclxuICB9KSkgYXMgQW5hbHlzaXNSZXNwb25zZVtdO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJPYmplY3RJZCIsImdldERhdGFiYXNlIiwiQ09MTEVDVElPTl9OQU1FIiwiY3JlYXRlQW5hbHlzaXMiLCJhbmFseXNpc0RhdGEiLCJkYiIsImNvbGxlY3Rpb24iLCJhbmFseXNpcyIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJyZXN1bHQiLCJpbnNlcnRPbmUiLCJpZCIsImluc2VydGVkSWQiLCJ0b1N0cmluZyIsInVzZXJJZCIsInZpZGVvTWV0YWRhdGEiLCJzdWJqZWN0IiwibGFuZ3VhZ2UiLCJ2aWRlb1VybCIsInNlc3Npb25JZCIsInRvcGljIiwidHJhbnNjcmlwdCIsImNsYXJpdHlTY29yZSIsImNvbmZpZGVuY2VTY29yZSIsImF1ZGlvRmVhdHVyZXMiLCJlbmdhZ2VtZW50U2NvcmUiLCJnZXN0dXJlSW5kZXgiLCJkb21pbmFudEVtb3Rpb24iLCJ0ZWNobmljYWxEZXB0aCIsImludGVyYWN0aW9uSW5kZXgiLCJ0b3BpY01hdGNoZXMiLCJ0b3BpY1JlbGV2YW5jZVNjb3JlIiwiY29hY2hGZWVkYmFja0Vycm9yIiwiY29hY2hTdWdnZXN0aW9ucyIsImNvYWNoU3RyZW5ndGhzIiwibWxSZXNwb25zZSIsInN0YXR1cyIsImdldEFuYWx5c2lzQnlJZCIsIm9iamVjdElkIiwiZmluZE9uZSIsIl9pZCIsImdldEFuYWx5c2VzQnlVc2VySWQiLCJsaW1pdCIsInNraXAiLCJhbmFseXNlcyIsImZpbmQiLCJzb3J0IiwidG9BcnJheSIsIm1hcCIsInVwZGF0ZUFuYWx5c2lzIiwidXBkYXRlcyIsImZpbmRPbmVBbmRVcGRhdGUiLCIkc2V0IiwicmV0dXJuRG9jdW1lbnQiLCJ2YWx1ZSIsInVwZGF0ZWQiLCJkZWxldGVBbmFseXNpcyIsImRlbGV0ZU9uZSIsImRlbGV0ZWRDb3VudCIsImdldEFuYWx5c2lzU3RhdHMiLCJzdGF0cyIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRncm91cCIsImNvdW50IiwiJHN1bSIsInJlZHVjZSIsImFjYyIsInN0YXQiLCJzZWFyY2hBbmFseXNlcyIsImZpbHRlcnMiLCJxdWVyeSIsIiRyZWdleCIsIiRvcHRpb25zIiwibWluQ2xhcml0eVNjb3JlIiwidW5kZWZpbmVkIiwiJGd0ZSIsIm1pbkNvbmZpZGVuY2VTY29yZSIsIm1pbkVuZ2FnZW1lbnRTY29yZSIsIm1pblRlY2huaWNhbERlcHRoIiwiZnJvbURhdGUiLCJ0b0RhdGUiLCIkbHRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Analysis.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/analysisService.ts":
/*!*****************************************!*\
  !*** ./lib/services/analysisService.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transformMLResponse: () => (/* binding */ transformMLResponse)\n/* harmony export */ });\nfunction transformMLResponse(mlResponse, userId, videoMetadata, subject, language, videoUrl) {\n    // Handle both success and error cases\n    if (!mlResponse.success || !mlResponse.data) {\n        // Return minimal data structure for failed analysis\n        return {\n            userId,\n            videoMetadata,\n            subject,\n            language,\n            videoUrl,\n            sessionId: \"failed\",\n            topic: subject,\n            transcript: \"\",\n            clarityScore: 0,\n            confidenceScore: 0,\n            audioFeatures: [],\n            engagementScore: 0,\n            gestureIndex: 0,\n            dominantEmotion: \"unknown\",\n            technicalDepth: 0,\n            interactionIndex: 0,\n            topicMatches: {},\n            topicRelevanceScore: 0,\n            coachFeedbackError: mlResponse.error || \"Analysis failed\",\n            mlResponse\n        };\n    }\n    const data = mlResponse.data;\n    const audioScores = data.scores.audio;\n    const videoScores = data.scores.video;\n    const textScores = data.scores.text;\n    return {\n        userId,\n        videoMetadata,\n        subject,\n        language,\n        videoUrl,\n        // Session info\n        sessionId: data.session_id,\n        topic: data.topic,\n        transcript: data.transcript,\n        // Audio scores - store as-is from ML service\n        clarityScore: audioScores.clarity_score,\n        confidenceScore: audioScores.confidence_score,\n        audioFeatures: audioScores.features || [],\n        // Video scores - store as-is from ML service\n        engagementScore: videoScores.engagement_score,\n        gestureIndex: videoScores.gesture_index,\n        dominantEmotion: videoScores.dominant_emotion || \"neutral\",\n        // Text scores - store as-is from ML service\n        technicalDepth: textScores.technical_depth,\n        interactionIndex: textScores.interaction_index,\n        topicMatches: textScores.topic_relevance?.matches || {},\n        topicRelevanceScore: textScores.topic_relevance?.relevance_score || 0,\n        // Coach feedback (optional, only if ML provides it)\n        coachFeedbackError: data.coach_feedback?.error,\n        coachSuggestions: data.coach_feedback?.improvements,\n        coachStrengths: data.coach_feedback?.strengths,\n        // Keep original response for reference\n        mlResponse\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VydmljZXMvYW5hbHlzaXNTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFTyxTQUFTQSxvQkFDZEMsVUFBc0IsRUFDdEJDLE1BQWMsRUFDZEMsYUFBa0IsRUFDbEJDLE9BQWUsRUFDZkMsUUFBZ0IsRUFDaEJDLFFBQWlCO0lBRWpCLHNDQUFzQztJQUN0QyxJQUFJLENBQUNMLFdBQVdNLE9BQU8sSUFBSSxDQUFDTixXQUFXTyxJQUFJLEVBQUU7UUFDM0Msb0RBQW9EO1FBQ3BELE9BQU87WUFDTE47WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUcsV0FBVztZQUNYQyxPQUFPTjtZQUNQTyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsaUJBQWlCO1lBQ2pCQyxlQUFlLEVBQUU7WUFDakJDLGlCQUFpQjtZQUNqQkMsY0FBYztZQUNkQyxpQkFBaUI7WUFDakJDLGdCQUFnQjtZQUNoQkMsa0JBQWtCO1lBQ2xCQyxjQUFjLENBQUM7WUFDZkMscUJBQXFCO1lBQ3JCQyxvQkFBb0JyQixXQUFXc0IsS0FBSyxJQUFJO1lBQ3hDdEI7UUFDRjtJQUNGO0lBRUEsTUFBTU8sT0FBT1AsV0FBV08sSUFBSTtJQUM1QixNQUFNZ0IsY0FBY2hCLEtBQUtpQixNQUFNLENBQUNDLEtBQUs7SUFDckMsTUFBTUMsY0FBY25CLEtBQUtpQixNQUFNLENBQUNHLEtBQUs7SUFDckMsTUFBTUMsYUFBYXJCLEtBQUtpQixNQUFNLENBQUNLLElBQUk7SUFFbkMsT0FBTztRQUNMNUI7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUM7UUFFQSxlQUFlO1FBQ2ZHLFdBQVdELEtBQUt1QixVQUFVO1FBQzFCckIsT0FBT0YsS0FBS0UsS0FBSztRQUNqQkMsWUFBWUgsS0FBS0csVUFBVTtRQUUzQiw2Q0FBNkM7UUFDN0NDLGNBQWNZLFlBQVlRLGFBQWE7UUFDdkNuQixpQkFBaUJXLFlBQVlTLGdCQUFnQjtRQUM3Q25CLGVBQWVVLFlBQVlVLFFBQVEsSUFBSSxFQUFFO1FBRXpDLDZDQUE2QztRQUM3Q25CLGlCQUFpQlksWUFBWVEsZ0JBQWdCO1FBQzdDbkIsY0FBY1csWUFBWVMsYUFBYTtRQUN2Q25CLGlCQUFpQlUsWUFBWVUsZ0JBQWdCLElBQUk7UUFFakQsNENBQTRDO1FBQzVDbkIsZ0JBQWdCVyxXQUFXUyxlQUFlO1FBQzFDbkIsa0JBQWtCVSxXQUFXVSxpQkFBaUI7UUFDOUNuQixjQUFjUyxXQUFXVyxlQUFlLEVBQUVDLFdBQVcsQ0FBQztRQUN0RHBCLHFCQUFxQlEsV0FBV1csZUFBZSxFQUFFRSxtQkFBbUI7UUFFcEUsb0RBQW9EO1FBQ3BEcEIsb0JBQW9CZCxLQUFLbUMsY0FBYyxFQUFFcEI7UUFDekNxQixrQkFBa0JwQyxLQUFLbUMsY0FBYyxFQUFFRTtRQUN2Q0MsZ0JBQWdCdEMsS0FBS21DLGNBQWMsRUFBRUk7UUFFckMsdUNBQXVDO1FBQ3ZDOUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8uL2xpYi9zZXJ2aWNlcy9hbmFseXNpc1NlcnZpY2UudHM/ZDQ4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNTFJlc3BvbnNlLCBDcmVhdGVBbmFseXNpc0lucHV0IH0gZnJvbSBcIkAvbGliL3R5cGVzL2FuYWx5c2lzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTUxSZXNwb25zZShcclxuICBtbFJlc3BvbnNlOiBNTFJlc3BvbnNlLFxyXG4gIHVzZXJJZDogc3RyaW5nLFxyXG4gIHZpZGVvTWV0YWRhdGE6IGFueSxcclxuICBzdWJqZWN0OiBzdHJpbmcsXHJcbiAgbGFuZ3VhZ2U6IHN0cmluZyxcclxuICB2aWRlb1VybD86IHN0cmluZ1xyXG4pOiBPbWl0PENyZWF0ZUFuYWx5c2lzSW5wdXQsIFwic3RhdHVzXCI+IHtcclxuICAvLyBIYW5kbGUgYm90aCBzdWNjZXNzIGFuZCBlcnJvciBjYXNlc1xyXG4gIGlmICghbWxSZXNwb25zZS5zdWNjZXNzIHx8ICFtbFJlc3BvbnNlLmRhdGEpIHtcclxuICAgIC8vIFJldHVybiBtaW5pbWFsIGRhdGEgc3RydWN0dXJlIGZvciBmYWlsZWQgYW5hbHlzaXNcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgdmlkZW9NZXRhZGF0YSxcclxuICAgICAgc3ViamVjdCxcclxuICAgICAgbGFuZ3VhZ2UsXHJcbiAgICAgIHZpZGVvVXJsLFxyXG4gICAgICBzZXNzaW9uSWQ6IFwiZmFpbGVkXCIsXHJcbiAgICAgIHRvcGljOiBzdWJqZWN0LFxyXG4gICAgICB0cmFuc2NyaXB0OiBcIlwiLFxyXG4gICAgICBjbGFyaXR5U2NvcmU6IDAsXHJcbiAgICAgIGNvbmZpZGVuY2VTY29yZTogMCxcclxuICAgICAgYXVkaW9GZWF0dXJlczogW10sXHJcbiAgICAgIGVuZ2FnZW1lbnRTY29yZTogMCxcclxuICAgICAgZ2VzdHVyZUluZGV4OiAwLFxyXG4gICAgICBkb21pbmFudEVtb3Rpb246IFwidW5rbm93blwiLFxyXG4gICAgICB0ZWNobmljYWxEZXB0aDogMCxcclxuICAgICAgaW50ZXJhY3Rpb25JbmRleDogMCxcclxuICAgICAgdG9waWNNYXRjaGVzOiB7fSxcclxuICAgICAgdG9waWNSZWxldmFuY2VTY29yZTogMCxcclxuICAgICAgY29hY2hGZWVkYmFja0Vycm9yOiBtbFJlc3BvbnNlLmVycm9yIHx8IFwiQW5hbHlzaXMgZmFpbGVkXCIsXHJcbiAgICAgIG1sUmVzcG9uc2UsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF0YSA9IG1sUmVzcG9uc2UuZGF0YTtcclxuICBjb25zdCBhdWRpb1Njb3JlcyA9IGRhdGEuc2NvcmVzLmF1ZGlvO1xyXG4gIGNvbnN0IHZpZGVvU2NvcmVzID0gZGF0YS5zY29yZXMudmlkZW87XHJcbiAgY29uc3QgdGV4dFNjb3JlcyA9IGRhdGEuc2NvcmVzLnRleHQ7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHVzZXJJZCxcclxuICAgIHZpZGVvTWV0YWRhdGEsXHJcbiAgICBzdWJqZWN0LFxyXG4gICAgbGFuZ3VhZ2UsXHJcbiAgICB2aWRlb1VybCxcclxuICAgIFxyXG4gICAgLy8gU2Vzc2lvbiBpbmZvXHJcbiAgICBzZXNzaW9uSWQ6IGRhdGEuc2Vzc2lvbl9pZCxcclxuICAgIHRvcGljOiBkYXRhLnRvcGljLFxyXG4gICAgdHJhbnNjcmlwdDogZGF0YS50cmFuc2NyaXB0LFxyXG4gICAgXHJcbiAgICAvLyBBdWRpbyBzY29yZXMgLSBzdG9yZSBhcy1pcyBmcm9tIE1MIHNlcnZpY2VcclxuICAgIGNsYXJpdHlTY29yZTogYXVkaW9TY29yZXMuY2xhcml0eV9zY29yZSxcclxuICAgIGNvbmZpZGVuY2VTY29yZTogYXVkaW9TY29yZXMuY29uZmlkZW5jZV9zY29yZSxcclxuICAgIGF1ZGlvRmVhdHVyZXM6IGF1ZGlvU2NvcmVzLmZlYXR1cmVzIHx8IFtdLFxyXG4gICAgXHJcbiAgICAvLyBWaWRlbyBzY29yZXMgLSBzdG9yZSBhcy1pcyBmcm9tIE1MIHNlcnZpY2VcclxuICAgIGVuZ2FnZW1lbnRTY29yZTogdmlkZW9TY29yZXMuZW5nYWdlbWVudF9zY29yZSxcclxuICAgIGdlc3R1cmVJbmRleDogdmlkZW9TY29yZXMuZ2VzdHVyZV9pbmRleCxcclxuICAgIGRvbWluYW50RW1vdGlvbjogdmlkZW9TY29yZXMuZG9taW5hbnRfZW1vdGlvbiB8fCBcIm5ldXRyYWxcIixcclxuICAgIFxyXG4gICAgLy8gVGV4dCBzY29yZXMgLSBzdG9yZSBhcy1pcyBmcm9tIE1MIHNlcnZpY2VcclxuICAgIHRlY2huaWNhbERlcHRoOiB0ZXh0U2NvcmVzLnRlY2huaWNhbF9kZXB0aCxcclxuICAgIGludGVyYWN0aW9uSW5kZXg6IHRleHRTY29yZXMuaW50ZXJhY3Rpb25faW5kZXgsXHJcbiAgICB0b3BpY01hdGNoZXM6IHRleHRTY29yZXMudG9waWNfcmVsZXZhbmNlPy5tYXRjaGVzIHx8IHt9LFxyXG4gICAgdG9waWNSZWxldmFuY2VTY29yZTogdGV4dFNjb3Jlcy50b3BpY19yZWxldmFuY2U/LnJlbGV2YW5jZV9zY29yZSB8fCAwLFxyXG4gICAgXHJcbiAgICAvLyBDb2FjaCBmZWVkYmFjayAob3B0aW9uYWwsIG9ubHkgaWYgTUwgcHJvdmlkZXMgaXQpXHJcbiAgICBjb2FjaEZlZWRiYWNrRXJyb3I6IGRhdGEuY29hY2hfZmVlZGJhY2s/LmVycm9yLFxyXG4gICAgY29hY2hTdWdnZXN0aW9uczogZGF0YS5jb2FjaF9mZWVkYmFjaz8uaW1wcm92ZW1lbnRzLFxyXG4gICAgY29hY2hTdHJlbmd0aHM6IGRhdGEuY29hY2hfZmVlZGJhY2s/LnN0cmVuZ3RocyxcclxuICAgIFxyXG4gICAgLy8gS2VlcCBvcmlnaW5hbCByZXNwb25zZSBmb3IgcmVmZXJlbmNlXHJcbiAgICBtbFJlc3BvbnNlLFxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInRyYW5zZm9ybU1MUmVzcG9uc2UiLCJtbFJlc3BvbnNlIiwidXNlcklkIiwidmlkZW9NZXRhZGF0YSIsInN1YmplY3QiLCJsYW5ndWFnZSIsInZpZGVvVXJsIiwic3VjY2VzcyIsImRhdGEiLCJzZXNzaW9uSWQiLCJ0b3BpYyIsInRyYW5zY3JpcHQiLCJjbGFyaXR5U2NvcmUiLCJjb25maWRlbmNlU2NvcmUiLCJhdWRpb0ZlYXR1cmVzIiwiZW5nYWdlbWVudFNjb3JlIiwiZ2VzdHVyZUluZGV4IiwiZG9taW5hbnRFbW90aW9uIiwidGVjaG5pY2FsRGVwdGgiLCJpbnRlcmFjdGlvbkluZGV4IiwidG9waWNNYXRjaGVzIiwidG9waWNSZWxldmFuY2VTY29yZSIsImNvYWNoRmVlZGJhY2tFcnJvciIsImVycm9yIiwiYXVkaW9TY29yZXMiLCJzY29yZXMiLCJhdWRpbyIsInZpZGVvU2NvcmVzIiwidmlkZW8iLCJ0ZXh0U2NvcmVzIiwidGV4dCIsInNlc3Npb25faWQiLCJjbGFyaXR5X3Njb3JlIiwiY29uZmlkZW5jZV9zY29yZSIsImZlYXR1cmVzIiwiZW5nYWdlbWVudF9zY29yZSIsImdlc3R1cmVfaW5kZXgiLCJkb21pbmFudF9lbW90aW9uIiwidGVjaG5pY2FsX2RlcHRoIiwiaW50ZXJhY3Rpb25faW5kZXgiLCJ0b3BpY19yZWxldmFuY2UiLCJtYXRjaGVzIiwicmVsZXZhbmNlX3Njb3JlIiwiY29hY2hfZmVlZGJhY2siLCJjb2FjaFN1Z2dlc3Rpb25zIiwiaW1wcm92ZW1lbnRzIiwiY29hY2hTdHJlbmd0aHMiLCJzdHJlbmd0aHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/analysisService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/storageService.ts":
/*!****************************************!*\
  !*** ./lib/services/storageService.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteVideo: () => (/* binding */ deleteVideo),\n/* harmony export */   getSignedVideoUrl: () => (/* binding */ getSignedVideoUrl),\n/* harmony export */   initializeStorageBucket: () => (/* binding */ initializeStorageBucket),\n/* harmony export */   listUserVideos: () => (/* binding */ listUserVideos),\n/* harmony export */   uploadVideo: () => (/* binding */ uploadVideo)\n/* harmony export */ });\n/* harmony import */ var _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/config/supabase */ \"(rsc)/./lib/config/supabase.ts\");\n\n/**\r\n * Upload video file to Supabase Storage\r\n * @param file - The video file to upload\r\n * @param userId - User ID for organizing files\r\n * @param fileName - Optional custom file name\r\n * @returns Upload result with URL or error\r\n */ async function uploadVideo(file, userId, fileName) {\n    try {\n        const timestamp = Date.now();\n        const sanitizedFileName = fileName || file.name;\n        const uniqueFileName = `${userId}/${timestamp}_${sanitizedFileName}`;\n        const arrayBuffer = await file.arrayBuffer();\n        const fileBuffer = Buffer.from(arrayBuffer);\n        // Upload using SERVICE ROLE KEY CLIENT\n        const { data, error } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.from(_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET).upload(uniqueFileName, fileBuffer, {\n            contentType: file.type,\n            upsert: false\n        });\n        if (error) return {\n            success: false,\n            error: error.message\n        };\n        // Generate signed URL for ML service (24 hours)\n        const { data: signedData, error: signedError } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.from(_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET).createSignedUrl(uniqueFileName, 86400);\n        if (signedError || !signedData) {\n            return {\n                success: false,\n                error: signedError?.message || \"Failed to generate signed URL\"\n            };\n        }\n        return {\n            success: true,\n            path: uniqueFileName,\n            signedUrl: signedData.signedUrl\n        };\n    } catch (e) {\n        return {\n            success: false,\n            error: String(e)\n        };\n    }\n}\n/**\r\n * Delete video from Supabase Storage\r\n * @param path - The storage path of the video\r\n * @returns Success boolean\r\n */ async function deleteVideo(path) {\n    try {\n        const { error } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.from(_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET).remove([\n            path\n        ]);\n        if (error) {\n            console.error(\"Supabase delete error:\", error);\n            return false;\n        }\n        console.log(`Video deleted successfully: ${path}`);\n        return true;\n    } catch (error) {\n        console.error(\"Delete video error:\", error);\n        return false;\n    }\n}\n/**\r\n * Get signed URL for private video access (with expiration)\r\n * @param path - The storage path of the video\r\n * @param expiresIn - Expiration time in seconds (default: 1 hour)\r\n * @returns Signed URL or null\r\n */ async function getSignedVideoUrl(path, expiresIn = 3600) {\n    try {\n        const { data, error } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.from(_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET).createSignedUrl(path, expiresIn);\n        if (error) {\n            console.error(\"Supabase signed URL error:\", error);\n            return null;\n        }\n        return data.signedUrl;\n    } catch (error) {\n        console.error(\"Get signed URL error:\", error);\n        return null;\n    }\n}\n/**\r\n * List all videos for a user\r\n * @param userId - User ID to filter videos\r\n * @returns List of video paths\r\n */ async function listUserVideos(userId) {\n    try {\n        const { data, error } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.from(_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET).list(userId, {\n            limit: 100,\n            offset: 0,\n            sortBy: {\n                column: \"created_at\",\n                order: \"desc\"\n            }\n        });\n        if (error) {\n            console.error(\"Supabase list error:\", error);\n            return [];\n        }\n        return data?.map((file)=>`${userId}/${file.name}`) || [];\n    } catch (error) {\n        console.error(\"List videos error:\", error);\n        return [];\n    }\n}\n/**\r\n * Initialize storage bucket (create if doesn't exist)\r\n * This should be called during setup\r\n */ async function initializeStorageBucket() {\n    try {\n        // Check if bucket exists\n        const { data: buckets, error: listError } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.listBuckets();\n        if (listError) {\n            console.error(\"Error listing buckets:\", listError);\n            return false;\n        }\n        const bucketExists = buckets?.some((bucket)=>bucket.name === _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET);\n        if (!bucketExists) {\n            // Create bucket with private access (requires signed URLs)\n            const { error: createError } = await _lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseServer.storage.createBucket(_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET, {\n                public: false,\n                fileSizeLimit: 524288000,\n                allowedMimeTypes: [\n                    \"video/mp4\",\n                    \"video/quicktime\",\n                    \"video/x-msvideo\",\n                    \"video/x-matroska\",\n                    \"video/webm\"\n                ]\n            });\n            if (createError) {\n                console.error(\"Error creating bucket:\", createError);\n                return false;\n            }\n            console.log(`Storage bucket \"${_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET}\" created successfully`);\n        } else {\n            console.log(`Storage bucket \"${_lib_config_supabase__WEBPACK_IMPORTED_MODULE_0__.VIDEO_BUCKET}\" already exists`);\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Initialize storage error:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QywwQkFBMEJvQztnQkFDeEMsT0FBTztZQUNUO1lBRUFuQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRWxDLDhEQUFZQSxDQUFDLHNCQUFzQixDQUFDO1FBQ3JFLE9BQU87WUFDTGlDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGdCQUFnQixFQUFFbEMsOERBQVlBLENBQUMsZ0JBQWdCLENBQUM7UUFDL0Q7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPZ0IsT0FBTztRQUNkaUIsUUFBUWpCLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8uL2xpYi9zZXJ2aWNlcy9zdG9yYWdlU2VydmljZS50cz8wZDVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlU2VydmVyLCBWSURFT19CVUNLRVQgfSBmcm9tICdAL2xpYi9jb25maWcvc3VwYWJhc2UnO1xyXG5cclxuZXhwb3J0IHR5cGUgVXBsb2FkUmVzdWx0ID0ge1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgdXJsPzogc3RyaW5nO1xyXG4gIHNpZ25lZFVybD86IHN0cmluZztcclxuICBwYXRoPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwbG9hZCB2aWRlbyBmaWxlIHRvIFN1cGFiYXNlIFN0b3JhZ2VcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgdmlkZW8gZmlsZSB0byB1cGxvYWRcclxuICogQHBhcmFtIHVzZXJJZCAtIFVzZXIgSUQgZm9yIG9yZ2FuaXppbmcgZmlsZXNcclxuICogQHBhcmFtIGZpbGVOYW1lIC0gT3B0aW9uYWwgY3VzdG9tIGZpbGUgbmFtZVxyXG4gKiBAcmV0dXJucyBVcGxvYWQgcmVzdWx0IHdpdGggVVJMIG9yIGVycm9yXHJcbiAqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZFZpZGVvKFxyXG4gIGZpbGU6IEZpbGUsXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgZmlsZU5hbWU/OiBzdHJpbmdcclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBzYW5pdGl6ZWRGaWxlTmFtZSA9IGZpbGVOYW1lIHx8IGZpbGUubmFtZTtcclxuICAgIGNvbnN0IHVuaXF1ZUZpbGVOYW1lID0gYCR7dXNlcklkfS8ke3RpbWVzdGFtcH1fJHtzYW5pdGl6ZWRGaWxlTmFtZX1gO1xyXG5cclxuICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgY29uc3QgZmlsZUJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKTtcclxuXHJcbiAgICAvLyBVcGxvYWQgdXNpbmcgU0VSVklDRSBST0xFIEtFWSBDTElFTlRcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyLnN0b3JhZ2VcclxuICAgICAgLmZyb20oVklERU9fQlVDS0VUKVxyXG4gICAgICAudXBsb2FkKHVuaXF1ZUZpbGVOYW1lLCBmaWxlQnVmZmVyLCB7XHJcbiAgICAgICAgY29udGVudFR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICB1cHNlcnQ6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG5cclxuICAgIC8vIEdlbmVyYXRlIHNpZ25lZCBVUkwgZm9yIE1MIHNlcnZpY2UgKDI0IGhvdXJzKVxyXG4gICAgY29uc3QgeyBkYXRhOiBzaWduZWREYXRhLCBlcnJvcjogc2lnbmVkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyLnN0b3JhZ2VcclxuICAgICAgLmZyb20oVklERU9fQlVDS0VUKVxyXG4gICAgICAuY3JlYXRlU2lnbmVkVXJsKHVuaXF1ZUZpbGVOYW1lLCA4NjQwMCk7XHJcblxyXG4gICAgaWYgKHNpZ25lZEVycm9yIHx8ICFzaWduZWREYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogc2lnbmVkRXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBnZW5lcmF0ZSBzaWduZWQgVVJMJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHBhdGg6IHVuaXF1ZUZpbGVOYW1lLFxyXG4gICAgICBzaWduZWRVcmw6IHNpZ25lZERhdGEuc2lnbmVkVXJsLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFN0cmluZyhlKSB9O1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBEZWxldGUgdmlkZW8gZnJvbSBTdXBhYmFzZSBTdG9yYWdlXHJcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIHN0b3JhZ2UgcGF0aCBvZiB0aGUgdmlkZW9cclxuICogQHJldHVybnMgU3VjY2VzcyBib29sZWFuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmlkZW8ocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyLnN0b3JhZ2VcclxuICAgICAgLmZyb20oVklERU9fQlVDS0VUKVxyXG4gICAgICAucmVtb3ZlKFtwYXRoXSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGRlbGV0ZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhgVmlkZW8gZGVsZXRlZCBzdWNjZXNzZnVsbHk6ICR7cGF0aH1gKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEZWxldGUgdmlkZW8gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBzaWduZWQgVVJMIGZvciBwcml2YXRlIHZpZGVvIGFjY2VzcyAod2l0aCBleHBpcmF0aW9uKVxyXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBzdG9yYWdlIHBhdGggb2YgdGhlIHZpZGVvXHJcbiAqIEBwYXJhbSBleHBpcmVzSW4gLSBFeHBpcmF0aW9uIHRpbWUgaW4gc2Vjb25kcyAoZGVmYXVsdDogMSBob3VyKVxyXG4gKiBAcmV0dXJucyBTaWduZWQgVVJMIG9yIG51bGxcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTaWduZWRWaWRlb1VybChcclxuICBwYXRoOiBzdHJpbmcsXHJcbiAgZXhwaXJlc0luOiBudW1iZXIgPSAzNjAwXHJcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVNlcnZlci5zdG9yYWdlXHJcbiAgICAgIC5mcm9tKFZJREVPX0JVQ0tFVClcclxuICAgICAgLmNyZWF0ZVNpZ25lZFVybChwYXRoLCBleHBpcmVzSW4pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBzaWduZWQgVVJMIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGEuc2lnbmVkVXJsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgc2lnbmVkIFVSTCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaXN0IGFsbCB2aWRlb3MgZm9yIGEgdXNlclxyXG4gKiBAcGFyYW0gdXNlcklkIC0gVXNlciBJRCB0byBmaWx0ZXIgdmlkZW9zXHJcbiAqIEByZXR1cm5zIExpc3Qgb2YgdmlkZW8gcGF0aHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0VXNlclZpZGVvcyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VTZXJ2ZXIuc3RvcmFnZVxyXG4gICAgICAuZnJvbShWSURFT19CVUNLRVQpXHJcbiAgICAgIC5saXN0KHVzZXJJZCwge1xyXG4gICAgICAgIGxpbWl0OiAxMDAsXHJcbiAgICAgICAgb2Zmc2V0OiAwLFxyXG4gICAgICAgIHNvcnRCeTogeyBjb2x1bW46ICdjcmVhdGVkX2F0Jywgb3JkZXI6ICdkZXNjJyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgbGlzdCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YT8ubWFwKChmaWxlKSA9PiBgJHt1c2VySWR9LyR7ZmlsZS5uYW1lfWApIHx8IFtdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdMaXN0IHZpZGVvcyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBzdG9yYWdlIGJ1Y2tldCAoY3JlYXRlIGlmIGRvZXNuJ3QgZXhpc3QpXHJcbiAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBkdXJpbmcgc2V0dXBcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU3RvcmFnZUJ1Y2tldCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgaWYgYnVja2V0IGV4aXN0c1xyXG4gICAgY29uc3QgeyBkYXRhOiBidWNrZXRzLCBlcnJvcjogbGlzdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVNlcnZlci5zdG9yYWdlLmxpc3RCdWNrZXRzKCk7XHJcblxyXG4gICAgaWYgKGxpc3RFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIGJ1Y2tldHM6JywgbGlzdEVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJ1Y2tldEV4aXN0cyA9IGJ1Y2tldHM/LnNvbWUoKGJ1Y2tldCkgPT4gYnVja2V0Lm5hbWUgPT09IFZJREVPX0JVQ0tFVCk7XHJcblxyXG4gICAgaWYgKCFidWNrZXRFeGlzdHMpIHtcclxuICAgICAgLy8gQ3JlYXRlIGJ1Y2tldCB3aXRoIHByaXZhdGUgYWNjZXNzIChyZXF1aXJlcyBzaWduZWQgVVJMcylcclxuICAgICAgY29uc3QgeyBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyLnN0b3JhZ2UuY3JlYXRlQnVja2V0KFZJREVPX0JVQ0tFVCwge1xyXG4gICAgICAgIHB1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgZmlsZVNpemVMaW1pdDogNTI0Mjg4MDAwLCAvLyA1MDBNQiBsaW1pdFxyXG4gICAgICAgIGFsbG93ZWRNaW1lVHlwZXM6IFsndmlkZW8vbXA0JywgJ3ZpZGVvL3F1aWNrdGltZScsICd2aWRlby94LW1zdmlkZW8nLCAndmlkZW8veC1tYXRyb3NrYScsICd2aWRlby93ZWJtJ10sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGNyZWF0ZUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYnVja2V0OicsIGNyZWF0ZUVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBTdG9yYWdlIGJ1Y2tldCBcIiR7VklERU9fQlVDS0VUfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhgU3RvcmFnZSBidWNrZXQgXCIke1ZJREVPX0JVQ0tFVH1cIiBhbHJlYWR5IGV4aXN0c2ApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdJbml0aWFsaXplIHN0b3JhZ2UgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsic3VwYWJhc2VTZXJ2ZXIiLCJWSURFT19CVUNLRVQiLCJ1cGxvYWRWaWRlbyIsImZpbGUiLCJ1c2VySWQiLCJmaWxlTmFtZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJzYW5pdGl6ZWRGaWxlTmFtZSIsIm5hbWUiLCJ1bmlxdWVGaWxlTmFtZSIsImFycmF5QnVmZmVyIiwiZmlsZUJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJkYXRhIiwiZXJyb3IiLCJzdG9yYWdlIiwidXBsb2FkIiwiY29udGVudFR5cGUiLCJ0eXBlIiwidXBzZXJ0Iiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzaWduZWREYXRhIiwic2lnbmVkRXJyb3IiLCJjcmVhdGVTaWduZWRVcmwiLCJwYXRoIiwic2lnbmVkVXJsIiwiZSIsIlN0cmluZyIsImRlbGV0ZVZpZGVvIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsImdldFNpZ25lZFZpZGVvVXJsIiwiZXhwaXJlc0luIiwibGlzdFVzZXJWaWRlb3MiLCJsaXN0IiwibGltaXQiLCJvZmZzZXQiLCJzb3J0QnkiLCJjb2x1bW4iLCJvcmRlciIsIm1hcCIsImluaXRpYWxpemVTdG9yYWdlQnVja2V0IiwiYnVja2V0cyIsImxpc3RFcnJvciIsImxpc3RCdWNrZXRzIiwiYnVja2V0RXhpc3RzIiwic29tZSIsImJ1Y2tldCIsImNyZWF0ZUVycm9yIiwiY3JlYXRlQnVja2V0IiwicHVibGljIiwiZmlsZVNpemVMaW1pdCIsImFsbG93ZWRNaW1lVHlwZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/storageService.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/jwt.ts":
/*!**************************!*\
  !*** ./lib/utils/jwt.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateAccessToken: () => (/* binding */ generateAccessToken),\n/* harmony export */   generateRefreshToken: () => (/* binding */ generateRefreshToken),\n/* harmony export */   generateTokens: () => (/* binding */ generateTokens),\n/* harmony export */   verifyAccessToken: () => (/* binding */ verifyAccessToken),\n/* harmony export */   verifyRefreshToken: () => (/* binding */ verifyRefreshToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/config/jwt */ \"(rsc)/./lib/config/jwt.ts\");\n\n\nconst generateAccessToken = (payload)=>{\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__.JWT_SECRET, {\n        expiresIn: _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__.ACCESS_TOKEN_EXPIRY\n    });\n};\nconst generateRefreshToken = (payload)=>{\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__.JWT_REFRESH_SECRET, {\n        expiresIn: _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__.REFRESH_TOKEN_EXPIRY\n    });\n};\nconst verifyAccessToken = (token)=>{\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__.JWT_SECRET);\n        return decoded;\n    } catch (error) {\n        return null;\n    }\n};\nconst verifyRefreshToken = (token)=>{\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, _lib_config_jwt__WEBPACK_IMPORTED_MODULE_1__.JWT_REFRESH_SECRET);\n        return decoded;\n    } catch (error) {\n        return null;\n    }\n};\nconst generateTokens = (payload)=>{\n    const accessToken = generateAccessToken(payload);\n    const refreshToken = generateRefreshToken(payload);\n    return {\n        accessToken,\n        refreshToken\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStCO0FBT0w7QUFRbkIsTUFBTUssc0JBQXNCLENBQUNDO0lBQ2xDLE9BQU9OLHdEQUFRLENBQUNNLFNBQVNMLHVEQUFVQSxFQUFFO1FBQUVPLFdBQVdMLGdFQUFtQkE7SUFBQztBQUN4RSxFQUFFO0FBRUssTUFBTU0sdUJBQXVCLENBQUNIO0lBQ25DLE9BQU9OLHdEQUFRLENBQUNNLFNBQVNKLCtEQUFrQkEsRUFBRTtRQUFFTSxXQUFXSixpRUFBb0JBO0lBQUM7QUFDakYsRUFBRTtBQUVLLE1BQU1NLG9CQUFvQixDQUFDQztJQUNoQyxJQUFJO1FBQ0YsTUFBTUMsVUFBVVosMERBQVUsQ0FBQ1csT0FBT1YsdURBQVVBO1FBQzVDLE9BQU9XO0lBQ1QsRUFBRSxPQUFPRSxPQUFPO1FBQ2QsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU1DLHFCQUFxQixDQUFDSjtJQUNqQyxJQUFJO1FBQ0YsTUFBTUMsVUFBVVosMERBQVUsQ0FBQ1csT0FBT1QsK0RBQWtCQTtRQUNwRCxPQUFPVTtJQUNULEVBQUUsT0FBT0UsT0FBTztRQUNkLE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFSyxNQUFNRSxpQkFBaUIsQ0FBQ1Y7SUFDN0IsTUFBTVcsY0FBY1osb0JBQW9CQztJQUN4QyxNQUFNWSxlQUFlVCxxQkFBcUJIO0lBQzFDLE9BQU87UUFBRVc7UUFBYUM7SUFBYTtBQUNyQyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2hpa3NoYW5ldHJhLXByb3RvdHlwZS8uL2xpYi91dGlscy9qd3QudHM/MWNjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgSldUX1NFQ1JFVCxcclxuICBKV1RfUkVGUkVTSF9TRUNSRVQsXHJcbiAgQUNDRVNTX1RPS0VOX0VYUElSWSxcclxuICBSRUZSRVNIX1RPS0VOX0VYUElSWSxcclxufSBmcm9tIFwiQC9saWIvY29uZmlnL2p3dFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUb2tlblBheWxvYWQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICByb2xlPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVBY2Nlc3NUb2tlbiA9IChwYXlsb2FkOiBUb2tlblBheWxvYWQpOiBzdHJpbmcgPT4ge1xyXG4gIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogQUNDRVNTX1RPS0VOX0VYUElSWSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVJlZnJlc2hUb2tlbiA9IChwYXlsb2FkOiBUb2tlblBheWxvYWQpOiBzdHJpbmcgPT4ge1xyXG4gIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfUkVGUkVTSF9TRUNSRVQsIHsgZXhwaXJlc0luOiBSRUZSRVNIX1RPS0VOX0VYUElSWSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJpZnlBY2Nlc3NUb2tlbiA9ICh0b2tlbjogc3RyaW5nKTogVG9rZW5QYXlsb2FkIHwgbnVsbCA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBUb2tlblBheWxvYWQ7XHJcbiAgICByZXR1cm4gZGVjb2RlZDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHZlcmlmeVJlZnJlc2hUb2tlbiA9ICh0b2tlbjogc3RyaW5nKTogVG9rZW5QYXlsb2FkIHwgbnVsbCA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfUkVGUkVTSF9TRUNSRVQpIGFzIFRva2VuUGF5bG9hZDtcclxuICAgIHJldHVybiBkZWNvZGVkO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVUb2tlbnMgPSAocGF5bG9hZDogVG9rZW5QYXlsb2FkKSA9PiB7XHJcbiAgY29uc3QgYWNjZXNzVG9rZW4gPSBnZW5lcmF0ZUFjY2Vzc1Rva2VuKHBheWxvYWQpO1xyXG4gIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGdlbmVyYXRlUmVmcmVzaFRva2VuKHBheWxvYWQpO1xyXG4gIHJldHVybiB7IGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4gfTtcclxufTtcclxuIl0sIm5hbWVzIjpbImp3dCIsIkpXVF9TRUNSRVQiLCJKV1RfUkVGUkVTSF9TRUNSRVQiLCJBQ0NFU1NfVE9LRU5fRVhQSVJZIiwiUkVGUkVTSF9UT0tFTl9FWFBJUlkiLCJnZW5lcmF0ZUFjY2Vzc1Rva2VuIiwicGF5bG9hZCIsInNpZ24iLCJleHBpcmVzSW4iLCJnZW5lcmF0ZVJlZnJlc2hUb2tlbiIsInZlcmlmeUFjY2Vzc1Rva2VuIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwiZXJyb3IiLCJ2ZXJpZnlSZWZyZXNoVG9rZW4iLCJnZW5lcmF0ZVRva2VucyIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/jwt.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/videoUpload.ts":
/*!**********************************!*\
  !*** ./lib/utils/videoUpload.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prepareMLPayload: () => (/* binding */ prepareMLPayload),\n/* harmony export */   uploadVideoToStorage: () => (/* binding */ uploadVideoToStorage)\n/* harmony export */ });\n/* harmony import */ var _services_storageService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/storageService */ \"(rsc)/./lib/services/storageService.ts\");\n\n/**\r\n * Upload video file to Supabase and return metadata\r\n * Centralized utility for video upload operations\r\n */ async function uploadVideoToStorage(file, userId) {\n    try {\n        console.log(`Uploading video to Supabase: ${file.name}`);\n        const uploadResult = await (0,_services_storageService__WEBPACK_IMPORTED_MODULE_0__.uploadVideo)(file, userId, file.name);\n        if (!uploadResult.success) {\n            return {\n                success: false,\n                error: uploadResult.error || \"Failed to upload video to storage\"\n            };\n        }\n        console.log(`Video uploaded successfully with signed URL`);\n        // For private buckets, we use the storage path as the video URL identifier\n        // Actual playback will require generating signed URLs\n        const videoUrl = `supabase://${uploadResult.path}`;\n        // Return standardized video metadata\n        return {\n            success: true,\n            videoMetadata: {\n                fileName: file.name,\n                fileSize: file.size,\n                mimeType: file.type,\n                videoUrl: videoUrl,\n                signedUrl: uploadResult.signedUrl,\n                storagePath: uploadResult.path\n            }\n        };\n    } catch (error) {\n        console.error(\"Upload video utility error:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown upload error\"\n        };\n    }\n}\n/**\r\n * Prepare ML microservice payload with signed video URL\r\n */ function prepareMLPayload(signedUrl, subject, language, file, userId) {\n    return {\n        video_url: signedUrl,\n        topic: subject,\n        language: language,\n        metadata: {\n            fileName: file.name,\n            fileSize: file.size,\n            mimeType: file.type,\n            userId: userId\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvdmlkZW9VcGxvYWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlEO0FBRXpEOzs7Q0FHQyxHQUNNLGVBQWVDLHFCQUNwQkMsSUFBVSxFQUNWQyxNQUFjO0lBYWQsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyw2QkFBNkIsRUFBRUgsS0FBS0ksSUFBSSxDQUFDLENBQUM7UUFDdkQsTUFBTUMsZUFBZSxNQUFNUCxxRUFBV0EsQ0FBQ0UsTUFBTUMsUUFBUUQsS0FBS0ksSUFBSTtRQUU5RCxJQUFJLENBQUNDLGFBQWFDLE9BQU8sRUFBRTtZQUN6QixPQUFPO2dCQUNMQSxTQUFTO2dCQUNUQyxPQUFPRixhQUFhRSxLQUFLLElBQUk7WUFDL0I7UUFDRjtRQUVBTCxRQUFRQyxHQUFHLENBQUMsQ0FBQywyQ0FBMkMsQ0FBQztRQUV6RCwyRUFBMkU7UUFDM0Usc0RBQXNEO1FBQ3RELE1BQU1LLFdBQVcsQ0FBQyxXQUFXLEVBQUVILGFBQWFJLElBQUksQ0FBQyxDQUFDO1FBRWxELHFDQUFxQztRQUNyQyxPQUFPO1lBQ0xILFNBQVM7WUFDVEksZUFBZTtnQkFDYkMsVUFBVVgsS0FBS0ksSUFBSTtnQkFDbkJRLFVBQVVaLEtBQUthLElBQUk7Z0JBQ25CQyxVQUFVZCxLQUFLZSxJQUFJO2dCQUNuQlAsVUFBVUE7Z0JBQ1ZRLFdBQVdYLGFBQWFXLFNBQVM7Z0JBQ2pDQyxhQUFhWixhQUFhSSxJQUFJO1lBQ2hDO1FBQ0Y7SUFDRixFQUFFLE9BQU9GLE9BQU87UUFDZEwsUUFBUUssS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTztZQUNMRCxTQUFTO1lBQ1RDLE9BQU9BLGlCQUFpQlcsUUFBUVgsTUFBTVksT0FBTyxHQUFHO1FBQ2xEO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0MsaUJBQ2RKLFNBQWlCLEVBQ2pCSyxPQUFlLEVBQ2ZDLFFBQWdCLEVBQ2hCdEIsSUFBVSxFQUNWQyxNQUFjO0lBRWQsT0FBTztRQUNMc0IsV0FBV1A7UUFDWFEsT0FBT0g7UUFDUEMsVUFBVUE7UUFDVkcsVUFBVTtZQUNSZCxVQUFVWCxLQUFLSSxJQUFJO1lBQ25CUSxVQUFVWixLQUFLYSxJQUFJO1lBQ25CQyxVQUFVZCxLQUFLZSxJQUFJO1lBQ25CZCxRQUFRQTtRQUNWO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NoaWtzaGFuZXRyYS1wcm90b3R5cGUvLi9saWIvdXRpbHMvdmlkZW9VcGxvYWQudHM/ZjE5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1cGxvYWRWaWRlbyB9IGZyb20gXCIuLi9zZXJ2aWNlcy9zdG9yYWdlU2VydmljZVwiO1xyXG5cclxuLyoqXHJcbiAqIFVwbG9hZCB2aWRlbyBmaWxlIHRvIFN1cGFiYXNlIGFuZCByZXR1cm4gbWV0YWRhdGFcclxuICogQ2VudHJhbGl6ZWQgdXRpbGl0eSBmb3IgdmlkZW8gdXBsb2FkIG9wZXJhdGlvbnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRWaWRlb1RvU3RvcmFnZShcclxuICBmaWxlOiBGaWxlLFxyXG4gIHVzZXJJZDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgdmlkZW9NZXRhZGF0YT86IHtcclxuICAgIGZpbGVOYW1lOiBzdHJpbmc7XHJcbiAgICBmaWxlU2l6ZTogbnVtYmVyO1xyXG4gICAgbWltZVR5cGU6IHN0cmluZztcclxuICAgIHZpZGVvVXJsOiBzdHJpbmc7XHJcbiAgICBzaWduZWRVcmw6IHN0cmluZztcclxuICAgIHN0b3JhZ2VQYXRoOiBzdHJpbmc7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIHZpZGVvIHRvIFN1cGFiYXNlOiAke2ZpbGUubmFtZX1gKTtcclxuICAgIGNvbnN0IHVwbG9hZFJlc3VsdCA9IGF3YWl0IHVwbG9hZFZpZGVvKGZpbGUsIHVzZXJJZCwgZmlsZS5uYW1lKTtcclxuXHJcbiAgICBpZiAoIXVwbG9hZFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHVwbG9hZFJlc3VsdC5lcnJvciB8fCBcIkZhaWxlZCB0byB1cGxvYWQgdmlkZW8gdG8gc3RvcmFnZVwiLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGBWaWRlbyB1cGxvYWRlZCBzdWNjZXNzZnVsbHkgd2l0aCBzaWduZWQgVVJMYCk7XHJcblxyXG4gICAgLy8gRm9yIHByaXZhdGUgYnVja2V0cywgd2UgdXNlIHRoZSBzdG9yYWdlIHBhdGggYXMgdGhlIHZpZGVvIFVSTCBpZGVudGlmaWVyXHJcbiAgICAvLyBBY3R1YWwgcGxheWJhY2sgd2lsbCByZXF1aXJlIGdlbmVyYXRpbmcgc2lnbmVkIFVSTHNcclxuICAgIGNvbnN0IHZpZGVvVXJsID0gYHN1cGFiYXNlOi8vJHt1cGxvYWRSZXN1bHQucGF0aH1gO1xyXG5cclxuICAgIC8vIFJldHVybiBzdGFuZGFyZGl6ZWQgdmlkZW8gbWV0YWRhdGFcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHZpZGVvTWV0YWRhdGE6IHtcclxuICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgIGZpbGVTaXplOiBmaWxlLnNpemUsXHJcbiAgICAgICAgbWltZVR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICB2aWRlb1VybDogdmlkZW9VcmwsXHJcbiAgICAgICAgc2lnbmVkVXJsOiB1cGxvYWRSZXN1bHQuc2lnbmVkVXJsISxcclxuICAgICAgICBzdG9yYWdlUGF0aDogdXBsb2FkUmVzdWx0LnBhdGghLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIlVwbG9hZCB2aWRlbyB1dGlsaXR5IGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIHVwbG9hZCBlcnJvclwiLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmVwYXJlIE1MIG1pY3Jvc2VydmljZSBwYXlsb2FkIHdpdGggc2lnbmVkIHZpZGVvIFVSTFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVNTFBheWxvYWQoXHJcbiAgc2lnbmVkVXJsOiBzdHJpbmcsXHJcbiAgc3ViamVjdDogc3RyaW5nLFxyXG4gIGxhbmd1YWdlOiBzdHJpbmcsXHJcbiAgZmlsZTogRmlsZSxcclxuICB1c2VySWQ6IHN0cmluZ1xyXG4pIHtcclxuICByZXR1cm4ge1xyXG4gICAgdmlkZW9fdXJsOiBzaWduZWRVcmwsXHJcbiAgICB0b3BpYzogc3ViamVjdCxcclxuICAgIGxhbmd1YWdlOiBsYW5ndWFnZSxcclxuICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgIGZpbGVTaXplOiBmaWxlLnNpemUsXHJcbiAgICAgIG1pbWVUeXBlOiBmaWxlLnR5cGUsXHJcbiAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgfSxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1cGxvYWRWaWRlbyIsInVwbG9hZFZpZGVvVG9TdG9yYWdlIiwiZmlsZSIsInVzZXJJZCIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwidXBsb2FkUmVzdWx0Iiwic3VjY2VzcyIsImVycm9yIiwidmlkZW9VcmwiLCJwYXRoIiwidmlkZW9NZXRhZGF0YSIsImZpbGVOYW1lIiwiZmlsZVNpemUiLCJzaXplIiwibWltZVR5cGUiLCJ0eXBlIiwic2lnbmVkVXJsIiwic3RvcmFnZVBhdGgiLCJFcnJvciIsIm1lc3NhZ2UiLCJwcmVwYXJlTUxQYXlsb2FkIiwic3ViamVjdCIsImxhbmd1YWdlIiwidmlkZW9fdXJsIiwidG9waWMiLCJtZXRhZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/videoUpload.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CWebprojects%5CShikshaNetra&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();